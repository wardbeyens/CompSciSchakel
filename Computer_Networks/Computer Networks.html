<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						}
</style><title>Computer Networks</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='computer-networks'><span>Computer Networks</span></h1><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#computer-networks">Computer Networks</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n7"><a class="md-toc-inner" href="#chapter-1-application-layer">Chapter 1 Application Layer</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n8"><a class="md-toc-inner" href="#rfc">RFC</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n11"><a class="md-toc-inner" href="#telnet">Telnet</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n23"><a class="md-toc-inner" href="#file-transfer-protocol-ftp">File Transfer Protocol (FTP)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n34"><a class="md-toc-inner" href="#architectural-view-of-the-www">Architectural View of the WWW</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n42"><a class="md-toc-inner" href="#uniform-resource-identifiers-uris">Uniform Resource Identifiers (URIs)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n46"><a class="md-toc-inner" href="#hypertext-markup-language-html">Hypertext Markup Language (HTML)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n54"><a class="md-toc-inner" href="#hypertext-transfer-protocol-http">Hypertext Transfer Protocol (HTTP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n63"><a class="md-toc-inner" href="#http-1011-commands"><strong>HTTP 1.0/1.1 Commands</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n68"><a class="md-toc-inner" href="#inefficiency-in-http-10"><strong>Inefficiency in HTTP 1.0</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n76"><a class="md-toc-inner" href="#http-11-vs-http-10"><strong>HTTP 1.1 VS HTTP 1.0</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n79"><a class="md-toc-inner" href="#pipelining-in-http11">Pipelining in HTTP1.1</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n83"><a class="md-toc-inner" href="#simple-mail-transfer-protocol-smtp">Simple Mail Transfer Protocol (SMTP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n91"><a class="md-toc-inner" href="#the-architecture-of-email">The Architecture Of Email</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n93"><a class="md-toc-inner" href="#message-format">Message Format</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n95"><a class="md-toc-inner" href="#interaction-in-commandresponse-mode">Interaction in command/response mode</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n104"><a class="md-toc-inner" href="#post-office-protocol-pop">Post Office Protocol (POP)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n111"><a class="md-toc-inner" href="#internet-message-access-protocol-imap">Internet Message Access Protocol (IMAP)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n120"><a class="md-toc-inner" href="#web-mail-over-http">Web-mail Over HTTP</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n130"><a class="md-toc-inner" href="#dynamic-host-configuration-protocol-dhcp">Dynamic Host Configuration Protocol (DHCP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n143"><a class="md-toc-inner" href="#verschil-tussen-udp-en-tcp">Verschil tussen UDP en TCP</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n151"><a class="md-toc-inner" href="#address-leases">Address Leases</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n163"><a class="md-toc-inner" href="#dhcp-message-format">DHCP Message Format</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n166"><a class="md-toc-inner" href="#dhcp-discovery">DHCP Discovery</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n169"><a class="md-toc-inner" href="#renewing-a-lease">Renewing a Lease</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n171"><a class="md-toc-inner" href="#releasing-an-address">Releasing an Address</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n173"><a class="md-toc-inner" href="#duplicate-address-detection">Duplicate Address Detection</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n179"><a class="md-toc-inner" href="#domain-name-system-dns">Domain Name System (DNS)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n183"><a class="md-toc-inner" href="#hierarchical-domain-addresses">Hierarchical Domain Addresses</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n189"><a class="md-toc-inner" href="#top-level-domains">Top Level Domains</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n212"><a class="md-toc-inner" href="#benefits-of-hierarchy">Benefits of Hierarchy</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n221"><a class="md-toc-inner" href="#side-note-for-recursive-and-iterative-dns">Side note for Recursive and Iterative DNS</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n229"><a class="md-toc-inner" href="#non-overlapping-zones">Non-Overlapping Zones</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n242"><a class="md-toc-inner" href="#dns-messages"><strong>DNS Messages</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n245"><a class="md-toc-inner" href="#discovery-protocols-napster-gnutella">Discovery Protocols (Napster, Gnutella)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n247"><a class="md-toc-inner" href="#napster"><strong>Napster</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n270"><a class="md-toc-inner" href="#the-p2p-application-pattern">The P2P Application Pattern</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n273"><a class="md-toc-inner" href="#p2p-app-
≠
-p2p-network">P2P App <mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="2.106ex" role="img" focusable="false" viewBox="0 -716 778 931" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.486ex;"><defs><path id="MJX-42-TEX-N-2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2260" xlink:href="#MJX-42-TEX-N-2260"></use></g></g></g></svg></mjx-container><script type="math/tex">\ne</script> P2P Network</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n284"><a class="md-toc-inner" href="#important-note">Important Note</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n287"><a class="md-toc-inner" href="#gnutella-04">Gnutella 0.4</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n302"><a class="md-toc-inner" href="#gnutella-messages">Gnutella Messages</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n313"><a class="md-toc-inner" href="#connecting-a-new-peer">Connecting a New Peer:</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n328"><a class="md-toc-inner" href="#searching-for-a-file">Searching for a file</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n338"><a class="md-toc-inner" href="#file-transfer-from-peer-to-peer">File Transfer from peer to peer</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n347"><a class="md-toc-inner" href="#shortages-of-gnutella-04">Shortages of Gnutella 0.4</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n353"><a class="md-toc-inner" href="#gnutella-06">Gnutella 0.6</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n354"><a class="md-toc-inner" href="#upgrade-of-gnutella-06">Upgrade of Gnutella 0.6</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n363"><a class="md-toc-inner" href="#requirements-for-ultrapeers">Requirements for Ultrapeers:</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n380"><a class="md-toc-inner" href="#file-transfer-protocols-bittorrent">File Transfer Protocols (Bittorrent)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n388"><a class="md-toc-inner" href="#the-complete-file-sharing-problem"><strong>The Complete File Sharing Problem</strong></a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n389"><a class="md-toc-inner" href="#q1-how-to-discover-the-location-of-files-to-download"><strong>Q1: How to discover the location of files to download</strong></a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n391"><a class="md-toc-inner" href="#q2-how-to-optimally-replicate-content-to-peers">Q2: How to optimally replicate content to peers</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n393"><a class="md-toc-inner" href="#q3-how-to-encourage-users-to-upload">Q3: How to encourage users to upload</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n398"><a class="md-toc-inner" href="#secure-shell-ssh">Secure Shell (SSH)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n405"><a class="md-toc-inner" href="#ssh-connection">SSH Connection</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n414"><a class="md-toc-inner" href="#public-key-cryptography">Public Key Cryptography</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n416"><a class="md-toc-inner" href="#ssh-authentication">SSH Authentication</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n418"><a class="md-toc-inner" href="#anonymity">Anonymity</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n426"><a class="md-toc-inner" href="#onion-routing-technique">Onion Routing Technique</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n432"><a class="md-toc-inner" href="#tor-general-approach">TOR: General Approach</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n439"><a class="md-toc-inner" href="#security">Security</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n457"><a class="md-toc-inner" href="#tor-architecture">TOR Architecture</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n472"><a class="md-toc-inner" href="#onion-routers">Onion Routers</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n477"><a class="md-toc-inner" href="#tor-cells">TOR Cells</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n490"><a class="md-toc-inner" href="#important-commands">Important Commands</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n493"><a class="md-toc-inner" href="#tor-circuits">TOR Circuits</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n502"><a class="md-toc-inner" href="#establishing-a-tcp-connection">Establishing a TCP Connection</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n504"><a class="md-toc-inner" href="#chapter-2-the-transport-layer">Chapter 2 The Transport Layer</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n505"><a class="md-toc-inner" href="#the-transport-layer">The Transport Layer</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n514"><a class="md-toc-inner" href="#connectionless-transport">Connectionless Transport</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n516"><a class="md-toc-inner" href="#connection-oriented-transport">Connection-oriented Transport</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n534"><a class="md-toc-inner" href="#segment-encapsulation">Segment Encapsulation</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n541"><a class="md-toc-inner" href="#generalized-transport-primitives">Generalized Transport Primitives</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n543"><a class="md-toc-inner" href="#berkeley-sockets-bs">Berkeley Sockets (BS)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n546"><a class="md-toc-inner" href="#bs-state-machine">BS State Machine</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n549"><a class="md-toc-inner" href="#compare-to-the-data-link-layer">Compare to the Data Link Layer</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n559"><a class="md-toc-inner" href="#elements-of-transport-layer-protocols">Elements of Transport Layer Protocols</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n571"><a class="md-toc-inner" href="#addressing">Addressing</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n572"><a class="md-toc-inner" href="#transport-service-access-points-ie-ports">Transport Service Access Points i.e PORTS</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n581"><a class="md-toc-inner" href="#network-service-access-points-ie-ip-addresses">Network Service Access Points i.e IP-addresses</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n582"><a class="md-toc-inner" href="#network-service-access-points-nsaps-define-an-end-point-for-network-layer-traffic">Network Service Access Points (NSAPs) define an end-point for network layer traffic</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n588"><a class="md-toc-inner" href="#-1"></a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n591"><a class="md-toc-inner" href="#tsap-address-assignment">TSAP Address Assignment</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n598"><a class="md-toc-inner" href="#initial-connection-protocol">Initial Connection Protocol  </a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n609"><a class="md-toc-inner" href="#multiplexing-using-tsaps">Multiplexing Using TSAPs </a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n613"><a class="md-toc-inner" href="#connection-management">Connection Management</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n614"><a class="md-toc-inner" href="#problems-of-connection-management">Problems of Connection Management</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n620"><a class="md-toc-inner" href="#out-of-order-packets">Out of Order Packets</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n634"><a class="md-toc-inner" href="#the-two-generals-problem">The Two Generals Problem</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n637"><a class="md-toc-inner" href="#error-control">Error Control</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n638"><a class="md-toc-inner" href="#end-to-end-checksums">End-to-End Checksums</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n642"><a class="md-toc-inner" href="#acknowledgements">Acknowledgements</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n647"><a class="md-toc-inner" href="#flow-control">Flow Control</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n648"><a class="md-toc-inner" href="#sliding-windows-important">Sliding Windows !Important!</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n659"><a class="md-toc-inner" href="#sliding-window-protocol">Sliding Window Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n660"><a class="md-toc-inner" href="#window-size-1">Window Size</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n671"><a class="md-toc-inner" href="#stop-and-wait-operation">Stop-and-Wait Operation</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n690"><a class="md-toc-inner" href="#summary-of-stop-and-wait">Summary of Stop-and-Wait</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n699"><a class="md-toc-inner" href="#go-back-n">Go-Back-N</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n700"><a class="md-toc-inner" href="#principles-1">Principles</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n710"><a class="md-toc-inner" href="#sender-window">Sender Window</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n712"><a class="md-toc-inner" href="#receiver-window">Receiver Window</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n714"><a class="md-toc-inner" href="#acknowledgement">Acknowledgement</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n716"><a class="md-toc-inner" href="#normal-operation">Normal Operation</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n719"><a class="md-toc-inner" href="#segment-loss">Segment Loss</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n724"><a class="md-toc-inner" href="#selective-repeat">Selective Repeat</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n725"><a class="md-toc-inner" href="#principles-2">Principles</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n738"><a class="md-toc-inner" href="#sender-and-receiver-windows">Sender and Receiver Windows</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n740"><a class="md-toc-inner" href="#lost-segments">Lost Segments</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n742"><a class="md-toc-inner" href="#lost-acks">Lost ACKs</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n749"><a class="md-toc-inner" href="#window-size-restriction">Window Size Restriction</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n754"><a class="md-toc-inner" href="#congestion-control-1">Congestion Control</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n755"><a class="md-toc-inner" href="#what-is-congestion">What is Congestion?</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n760"><a class="md-toc-inner" href="#desirable-bandwidth-allocation">Desirable Bandwidth Allocation</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n785"><a class="md-toc-inner" href="#min-max-fairness">Min-Max Fairness</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n792"><a class="md-toc-inner" href="#convergence">Convergence</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n796"><a class="md-toc-inner" href="#types-of-congestion">Types of Congestion</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n804"><a class="md-toc-inner" href="#managing-send-rate">Managing Send Rate</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n809"><a class="md-toc-inner" href="#aimd-additive-increase-multiple-decrease">AIMD (Additive Increase, Multiple Decrease)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n824"><a class="md-toc-inner" href="#user-datagram-protocol-udp">User Datagram Protocol (UDP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n834"><a class="md-toc-inner" href="#structure">Structure</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n839"><a class="md-toc-inner" href="#checksum-1">Checksum</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n844"><a class="md-toc-inner" href="#benefits">Benefits</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n851"><a class="md-toc-inner" href="#real-time-protocol-rtp">Real Time Protocol (RTP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n859"><a class="md-toc-inner" href="#rtp-in-the-stack">RTP in the stack</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n861"><a class="md-toc-inner" href="#how-does-it-work">How does it work?</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n869"><a class="md-toc-inner" href="#why-use-udp-for-rtp">Why use UDP for RTP</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n872"><a class="md-toc-inner" href="#features">Features</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n881"><a class="md-toc-inner" href="#real-time-control-protocol-rtcp">Real Time Control Protocol (RTCP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n890"><a class="md-toc-inner" href="#jitter">Jitter</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n894"><a class="md-toc-inner" href="#modifying-playback-point">Modifying Playback Point</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n902"><a class="md-toc-inner" href="#transmission-control-protocol-tcp">Transmission Control Protocol (TCP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n952"><a class="md-toc-inner" href="#the-tcp-header">The TCP Header</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n955"><a class="md-toc-inner" href="#source-and-destination-ports">Source and Destination Ports</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n963"><a class="md-toc-inner" href="#tcp-header-length">TCP Header Length</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n968"><a class="md-toc-inner" href="#one-bit-flags">One-Bit Flags</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n972"><a class="md-toc-inner" href="#window-size-2">Window size</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n982"><a class="md-toc-inner" href="#checksum-2">Checksum</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n990"><a class="md-toc-inner" href="#options">Options</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n994"><a class="md-toc-inner" href="#data">Data</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1005"><a class="md-toc-inner" href="#3-way-handshake">3-Way Handshake</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1028"><a class="md-toc-inner" href="#tcp-as-a-state-machine">TCP as a State Machine</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1036"><a class="md-toc-inner" href="#receiver-control-of-transmission">Receiver Control of Transmission</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1044"><a class="md-toc-inner" href="#tinygram-syndrome">Tinygram Syndrome</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1057"><a class="md-toc-inner" href="#nagles-algorithm">Nagle's Algorithm</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1061"><a class="md-toc-inner" href="#silly-window-syndrome">Silly Window Syndrome</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1064"><a class="md-toc-inner" href="#clarkes-algorithm">Clarke's Algorithm</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1067"><a class="md-toc-inner" href="#retransmission-time-out">Retransmission Time Out</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1084"><a class="md-toc-inner" href="#estimating-round-trip-time">Estimating Round Trip Time</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1087"><a class="md-toc-inner" href="#estimating-variance-in-delay">Estimating Variance in Delay</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1092"><a class="md-toc-inner" href="#putting-it-all-together">Putting it All Together</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1096"><a class="md-toc-inner" href="#the-persistence-timer">The 'Persistence' Timer</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1107"><a class="md-toc-inner" href="#the-keep-alive-timer">The 'Keep Alive' Timer</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1118"><a class="md-toc-inner" href="#congestion-control-2">Congestion Control</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1127"><a class="md-toc-inner" href="#tcp-and-aimd">TCP and AIMD</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1132"><a class="md-toc-inner" href="#the-congestion-window">The Congestion Window</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1143"><a class="md-toc-inner" href="#packet-loss-as-congestion-signal">Packet loss as Congestion Signal</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1158"><a class="md-toc-inner" href="#a-short-coming-of-aimd">A Short coming of AIMD</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1163"><a class="md-toc-inner" href="#fast-recovery">Fast recovery</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1167"><a class="md-toc-inner" href="#selective-ack">Selective ACK</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1171"><a class="md-toc-inner" href="#explicit-congestion-notification-ecn-1">Explicit Congestion Notification (ECN)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1180"><a class="md-toc-inner" href="#chapter-3-the-network-layer">Chapter 3 The Network Layer</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1181"><a class="md-toc-inner" href="#terminology"><strong>Terminology</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1191"><a class="md-toc-inner" href="#role-of-the-network-layer">Role of the Network Layer</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1201"><a class="md-toc-inner" href="#store-and-forward-packet-switching">Store and Forward Packet Switching</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1205"><a class="md-toc-inner" href="#services-to-transport-layer">Services to Transport Layer</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1228"><a class="md-toc-inner" href="#connectionless">Connectionless</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1229"><a class="md-toc-inner" href="#principles-3">Principles</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1242"><a class="md-toc-inner" href="#example-1"><strong>Example</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1248"><a class="md-toc-inner" href="#connection-oriented">Connection-oriented</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1249"><a class="md-toc-inner" href="#principles-4">Principles</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1259"><a class="md-toc-inner" href="#example-2">Example</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1264"><a class="md-toc-inner" href="#connection-oriented-vs-connectionless">Connection-oriented vs Connectionless</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1267"><a class="md-toc-inner" href="#routing-algorithms">Routing Algorithms</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1269"><a class="md-toc-inner" href="#desirable-properties">Desirable Properties</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1283"><a class="md-toc-inner" href="#2-kinds-of-algorithms">2 Kinds of Algorithms</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1290"><a class="md-toc-inner" href="#the-sink-tree">The Sink Tree</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1294"><a class="md-toc-inner" href="#shortest-path-definitions">Shortest Path Definitions</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1302"><a class="md-toc-inner" href="#dijkstras-algorithm">Dijkstra's Algorithm</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1305"><a class="md-toc-inner" href="#bellman-ford-algorithm">Bellman-Ford Algorithm</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1320"><a class="md-toc-inner" href="#example-3">Example</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1324"><a class="md-toc-inner" href="#count-to-infinity-problem">Count to Infinity problem</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1342"><a class="md-toc-inner" href="#link-state-routing">Link State Routing</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1346"><a class="md-toc-inner" href="#hierarchical-routing">Hierarchical Routing</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1347"><a class="md-toc-inner" href="#principles-5">Principles</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1360"><a class="md-toc-inner" href="#example-4">Example</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1365"><a class="md-toc-inner" href="#delivery-models">Delivery Models</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1381"><a class="md-toc-inner" href="#multi-destination-broadcast-routing">Multi-destination Broadcast Routing</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1392"><a class="md-toc-inner" href="#flooding-broadcast">Flooding Broadcast</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1403"><a class="md-toc-inner" href="#reverse-path-broadcast">Reverse Path Broadcast</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1415"><a class="md-toc-inner" href="#spanning-tree-broadcast">Spanning Tree Broadcast</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1424"><a class="md-toc-inner" href="#open-shortest-path-first-ospf">Open Shortest Path First (OSPF)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1439"><a class="md-toc-inner" href="#load-balancing">Load Balancing</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1451"><a class="md-toc-inner" href="#ospf-packets">OSPF Packets</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1457"><a class="md-toc-inner" href="#border-gateway-protocol-bgp"><strong>Border Gateway Protocol (BGP)</strong></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1470"><a class="md-toc-inner" href="#operation-of-bgp">Operation of BGP</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1479"><a class="md-toc-inner" href="#internal-bgp">Internal BGP</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1489"><a class="md-toc-inner" href="#mobile-connectivity">Mobile Connectivity</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1503"><a class="md-toc-inner" href="#client-mobility">Client Mobility</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1509"><a class="md-toc-inner" href="#why-network-level-mobility">Why Network-level Mobility</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1515"><a class="md-toc-inner" href="#network-layer-mobility">Network-Layer Mobility</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1537"><a class="md-toc-inner" href="#ad-hoc-networks">Ad-Hoc Networks</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1540"><a class="md-toc-inner" href="#iot-concerns">IoT Concerns</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1548"><a class="md-toc-inner" href="#ad-hoc-on-demand-vector-routing">Ad-hoc On Demand Vector Routing</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1554"><a class="md-toc-inner" href="#aodv-route-discovery">AODV: Route discovery</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1572"><a class="md-toc-inner" href="#internet-control-and-message-protocol-icmp">Internet Control and Message Protocol (ICMP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1573"><a class="md-toc-inner" href="#packets">Packets</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1575"><a class="md-toc-inner" href="#traceroute">Traceroute</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1578"><a class="md-toc-inner" href="#address-resolution-protocol-arp">Address Resolution Protocol (ARP)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1586"><a class="md-toc-inner" href="#arp-in-action">ARP in Action</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1593"><a class="md-toc-inner" href="#throttling">Throttling</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1605"><a class="md-toc-inner" href="#estimating-load">Estimating Load</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1614"><a class="md-toc-inner" href="#choke-packets">Choke Packets</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1622"><a class="md-toc-inner" href="#explicit-congestion-notification-ecn-2">Explicit Congestion Notification (ECN)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1625"><a class="md-toc-inner" href="#random-early-detection">Random Early Detection</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1642"><a class="md-toc-inner" href="#chapter-4-data-link-layer">Chapter 4: Data Link Layer</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1643"><a class="md-toc-inner" href="#mac-layer-principles-medium-access-control">MAC layer principles (Medium Access Control)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1644"><a class="md-toc-inner" href="#the-channel-allocation-problem">The Channel Allocation Problem</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1652"><a class="md-toc-inner" href="#static-channel-allocation">Static Channel Allocation</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1658"><a class="md-toc-inner" href="#dividing-network-media">Dividing Network Media</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1666"><a class="md-toc-inner" href="#dynamic-assignment-assumptions">Dynamic Assignment Assumptions</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1680"><a class="md-toc-inner" href="#case-studies-important-takeaways">Case studies Important TakeAways</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1681"><a class="md-toc-inner" href="#slotted">Slotted</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1685"><a class="md-toc-inner" href="#carrier-sense-multiple-access-csma">Carrier Sense Multiple Access (CSMA)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1688"><a class="md-toc-inner" href="#non-persistent-carrier-sense-multiple-access-csma">non-Persistent Carrier Sense Multiple Access (CSMA)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1690"><a class="md-toc-inner" href="#1-persistent-carrier-sense-multiple-access-csma">1-Persistent Carrier Sense Multiple Access (CSMA)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1693"><a class="md-toc-inner" href="#p-persistent-carrier-sense-multiple-access-csma">p-Persistent Carrier Sense Multiple Access (CSMA)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1699"><a class="md-toc-inner" href="#hidden-and-exposed-terminals">Hidden and Exposed Terminals</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1701"><a class="md-toc-inner" href="#iot-challenges">IoT Challenges</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1721"><a class="md-toc-inner" href="#berkeley-mac">Berkeley MAC</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1735"><a class="md-toc-inner" href="#time-synchronized-mesh-protocol">Time Synchronized Mesh Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1757"><a class="md-toc-inner" href="#ethernet">Ethernet</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1758"><a class="md-toc-inner" href="#frame-formats">Frame Formats</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1760"><a class="md-toc-inner" href="#dix-v-ieee-8023">DIX v IEEE 802.3</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1773"><a class="md-toc-inner" href="#min--max-frame-length">Min. / Max. Frame Length</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1784"><a class="md-toc-inner" href="#ethernet-applies-1-p-csma-cd-carrier-sense-medium-access-with-collision-avoidance">Ethernet applies 1-p CSMA-CD (Carrier Sense Medium Access with Collision avoidance)</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1797"><a class="md-toc-inner" href="#exponential-back-off">Exponential Back-off</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1801"><a class="md-toc-inner" href="#security-issues">Security Issues</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1803"><a class="md-toc-inner" href="#from-a-single-cable-to-hubs">From a single Cable to Hubs</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1805"><a class="md-toc-inner" href="#-2"></a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1806"><a class="md-toc-inner" href="#motivation-for-switch-ethernet">Motivation for Switch Ethernet</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1814"><a class="md-toc-inner" href="#switched-ethernet">Switched Ethernet</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1835"><a class="md-toc-inner" href="#fast-ethernet">Fast Ethernet</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1849"><a class="md-toc-inner" href="#1-gigabit-ethernet">1-Gigabit Ethernet</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1871"><a class="md-toc-inner" href="#10-gigabit-ethernet">10-Gigabit Ethernet</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1880"><a class="md-toc-inner" href="#ieee-80211">IEEE 802.11</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1890"><a class="md-toc-inner" href="#wireless-challenges">Wireless Challenges</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1917"><a class="md-toc-inner" href="#virtual-channel-sensing">Virtual Channel Sensing</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1920"><a class="md-toc-inner" href="#power-saving">Power Saving</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1939"><a class="md-toc-inner" href="#the-data-link-layer">The Data Link Layer</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1949"><a class="md-toc-inner" href="#packets-and-frames">Packets and Frames</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1951"><a class="md-toc-inner" href="#types-of-data-link-layer">Types of Data Link Layer</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1969"><a class="md-toc-inner" href="#framing">Framing</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1985"><a class="md-toc-inner" href="#select-physical-layer-topics">Select Physical Layer Topics</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1986"><a class="md-toc-inner" href="#twisted-pairs">Twisted Pairs</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1989"><a class="md-toc-inner" href="#category-5-wiring-cat5">Category 5 Wiring (Cat5)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1993"><a class="md-toc-inner" href="#coaxial-cable">Coaxial cable</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1996"><a class="md-toc-inner" href="#optical-fiber">Optical Fiber</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2001"><a class="md-toc-inner" href="#wireless-communication">Wireless Communication</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2004"><a class="md-toc-inner" href="#microwave-communication">Microwave communication</a></span></p></div><p><span>Quick refresher</span></p><p><img src="https://miro.medium.com/max/1024/1*17Zz6v0HWIzgiOzQYmO6lA.jpeg" referrerpolicy="no-referrer" alt="Day 51: Understanding the OSI Model | by Anonymous | Medium"></p><h2 id='chapter-1-application-layer'><span>Chapter 1 Application Layer</span></h2><h3 id='rfc'><span>RFC</span></h3><p><span>RFC (Request for comments) is a memo published by the </span><strong><span>IETF</span></strong><span> (Internet Engineering Task Force). Not really a request for comments but a politically correct way of publishing.</span></p><p>&nbsp;</p><h3 id='telnet'><span>Telnet</span></h3><p><span>telnet is a command line interface for communication with a remote device or server. Telnet stands for teletype network. </span></p><p><span>Telnet can be used to</span></p><ul><li><span>Connect to a remote server or device and give commands just like you would be physically sitting in front of the computer</span></li><li><span>Manage and configure network devices such a routers and switches</span></li><li><span>Check if ports are open and closed on a server.</span></li></ul><p><span>Telnet is sent in clear text so there is no encryption, if would use it today anyone could grab your data your sending. It should not be used over the public internet. Telnet itself runs on port 23</span></p><p>&nbsp;</p><h3 id='file-transfer-protocol-ftp'><span>File Transfer Protocol (FTP)</span></h3><p><span>Designed to transfer files and navigate directory listings.</span></p><p><span>Used two TCP port:</span></p><ul><li><span>21 for control</span></li><li><span>20 for data transfers</span></li></ul><p><span>Control port uses Telnet protocol to negotiate session</span></p><p><img src="img/image-20220519130408042.png" referrerpolicy="no-referrer" alt="image-20220519130408042"></p><p><img src="img/image-20220519134613195.png" referrerpolicy="no-referrer" alt="image-20220519134613195"></p><p>&nbsp;</p><h3 id='architectural-view-of-the-www'><span>Architectural View of the WWW</span></h3><p><strong><span>Quick refresher for some important parts:</span></strong></p><ul><li><span>Clients use web browsers and </span><strong><span>HTTP</span></strong><span> to retrieve </span><strong><span>HTML</span></strong><span> files or web pages that are stored on servers at a specified URI.</span></li><li><span>Caches improve performance by locally storing the results of client requests. the cache will serve repeat request rather than downloading material again from the servers.</span></li></ul><p><img src="img/image-20220519131447286.png" referrerpolicy="no-referrer" alt="image-20220519131447286"></p><h3 id='uniform-resource-identifiers-uris'><span>Uniform Resource Identifiers (URIs)</span></h3><p><span>Web resources need a human-readable identifier in order to support easy retrieval -&gt; </span><strong><span>URI</span></strong></p><p><span>Most popular form of a </span><strong><span>URI</span></strong><span> is the </span><strong><span>Uniform Resource Locator (URL):</span></strong></p><p><img src="img/image-20220519131700988.png" referrerpolicy="no-referrer" alt="image-20220519131700988"></p><h3 id='hypertext-markup-language-html'><span>Hypertext Markup Language (HTML)</span></h3><ul><li><span>HyperText Markup Language is a subset of Standardized General Markup Language (SGML)</span></li><li><span>Documents use elements to “mark up” or identify sections of text for different purposes or display characteristics.</span></li><li><span>Mark up elements are not seen by the user when page is rendered by the web browser.</span></li></ul><h3 id='hypertext-transfer-protocol-http'><span>Hypertext Transfer Protocol (HTTP)</span></h3><ul><li><span>The </span><strong><span>Hyper Text Transfer Protocol (HTTP)</span></strong><span> supports client-server communication using a simple request/response protocol</span></li><li><span>It is an application-layer protocol, that operates over </span><strong><span>TCP on port 80</span></strong></li><li><span>The protocol is connectionless or stateless and has no notion of session.</span></li></ul><p>&nbsp;</p><h4 id='http-1011-commands'><strong><span>HTTP 1.0/1.1 Commands</span></strong></h4><p><img src="img/image-20220519133316092.png" referrerpolicy="no-referrer" alt="image-20220519133316092"></p><p><span>PUT -&gt; create new resource or overwrite it</span></p><p><span>POST -&gt; update existing resource</span></p><p>&nbsp;</p><h4 id='inefficiency-in-http-10'><strong><span>Inefficiency in HTTP 1.0</span></strong></h4><ul><li><span>Each web page contains an average of 40 embedded object(images, audio, video).</span></li><li><span>Opening a TCP connection for each object is inefficient, requiring 1 round trip per object</span></li><li><strong><span>TCP</span></strong><span> congestion algorithm slowly increases speed, so transfer rate is slower on new connections.</span></li></ul><h4 id='http-11-vs-http-10'><strong><span>HTTP 1.1 VS HTTP 1.0</span></strong></h4><p><img src="img/image-20220519134109878.png" referrerpolicy="no-referrer" alt="image-20220519134109878"></p><p>&nbsp;</p><h4 id='pipelining-in-http11'><span>Pipelining in HTTP1.1</span></h4><p><img src="img/image-20220519134546596.png" referrerpolicy="no-referrer" alt="image-20220519134546596"></p><p>&nbsp;</p><p>&nbsp;</p><h3 id='simple-mail-transfer-protocol-smtp'><span>Simple Mail Transfer Protocol (SMTP)</span></h3><p><span>Email as we know it today separates email exchange into two parts:</span></p><ul><li><strong><span>Mail submission and delivery protocols</span></strong><span>, which allow clients to connect to the mail server</span></li><li><strong><span>Mail transfer protocol</span></strong><span> which allows mail servers to communicate</span></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> This specialization allows us flexible access to email, while ensuring standard communication</span></p><h4 id='the-architecture-of-email'><span>The Architecture Of Email</span></h4><p><img src="img/image-20220519141433618.png" referrerpolicy="no-referrer" alt="image-20220519141433618"></p><h4 id='message-format'><span>Message Format</span></h4><p><img src="img/image-20220519141626574.png" referrerpolicy="no-referrer" alt="image-20220519141626574"></p><h4 id='interaction-in-commandresponse-mode'><span>Interaction in command/response mode</span></h4><p><strong><span>Three phases:</span></strong></p><ol start='' ><li><span>Handshaking</span></li><li><span>Transfer of messages</span></li><li><span>Closure</span></li></ol><h3 id='post-office-protocol-pop'><span>Post Office Protocol (POP)</span></h3><ul><li><span>A mechanism used by mail clients to talk to mail servers</span></li><li><span>A simple </span><strong><span>unsynchronized</span></strong><span> protocol, difficult to manage on multiple machines.</span></li></ul><p>&nbsp;</p><h3 id='internet-message-access-protocol-imap'><span>Internet Message Access Protocol (IMAP)</span></h3><ul><li><span>Another mechanism for mail clients to communicate with mail servers.</span></li><li><span>All folders (inbox, outbox, drafts, etc...) are </span><strong><span>synchronized</span></strong><span> on the client and the server.</span></li><li><span>Better suited because we use a lot of different devices but higher overhead.</span></li></ul><p>&nbsp;</p><h3 id='web-mail-over-http'><span>Web-mail Over HTTP</span></h3><ul><li><span>In this case the web browser is the mail client</span></li><li><span>No need for </span><strong><span>synchronization</span></strong><span> as all files are stored on the server.</span></li><li><strong><span>Lightweight</span></strong><span> and allows use on multiple devices, but </span><strong><span>requires a consistent Internet connection</span></strong></li></ul><p>&nbsp;</p><p>&nbsp;</p><h3 id='dynamic-host-configuration-protocol-dhcp'><span>Dynamic Host Configuration Protocol (DHCP)</span></h3><p><strong><span>Provides automated assignment of IP addresses:</span></strong></p><ul><li><span>IP addresses are assigned on-demand</span></li><li><span>Avoid manual IP configuration</span></li><li><span>Supports the mobility of a lot of smaller devices</span></li></ul><p><strong><span>USES UDP</span></strong><span> </span></p><p><img src="img/image-20220519143124945.png" referrerpolicy="no-referrer" alt="image-20220519143124945"></p><p><strong><span>HA MEMES</span></strong></p><p><img src="https://i.pinimg.com/736x/53/3d/89/533d891d1f54a2481d5fb14d31ec7f29.jpg" referrerpolicy="no-referrer" alt="TCP vs UDP - PC Master Race | Memes, Programming humor, Funny memes"></p><h4 id='verschil-tussen-udp-en-tcp'><span>Verschil tussen UDP en TCP</span></h4><p><span>Als ge u afvroeg wat het verschil is tussen het virgin UDP protocol en het CHAD TCP protocol kijk dan hieronder.</span></p><p><img src="https://64.media.tumblr.com/0fdacb64fcfeda55d0352bf9a27489ed/ec6fc35f4a29cd30-c8/s1280x1920/31664a402c83d7fcf4bfba88a1eabe964a406bf4.jpg" referrerpolicy="no-referrer" alt="Programmer Humor — TCP vs UDP"></p><p>&nbsp;</p><p>&nbsp;</p><p><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxIPEA8PDw0PDw8PDw8PDw8NDw8QDxAOFREWFhURFRUYHSggGBolGxUVITEhJSkrLi4uFx81ODMsNygtLisBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAKgBKwMBIgACEQEDEQH/xAAcAAADAAMBAQEAAAAAAAAAAAAAAQIDBQYHBAj/xAA7EAACAgEDAQQIAgkDBQAAAAAAAQIRAwQSITEFQVFhBhMiMnGBkaEHsRQjQlJicsHh8BUk0TOCkrLx/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANkOh0OgIAqgoBUIuhUBKQ6KodASBVBQE0BVBQEUMqgoBJDodAAFJBRaQE0UkNIugJSKURpFUBNBRVDUQJodFbSqAhIe0tRHQEKI6KoraBj2ioy7Q2gQohRaQ9oGPaLaZdonEDFtDaZKCgNYBdCAihobQUAhUVQgAB0FAICgoCQKCgJGkMdAaztvtNaaG6lKcrUYt0vOTfgjhv0/U58jlPVSjHujjlKMfDiKrx/ubT001O2edyhKSjDFihtdVa3ybfcvbivkjmuw9TLO3jwwgpwTmrqmop307+n0A6/Sz1GHH67FqXmUbcsWW3GUe9J9zOm7H7Sx6rEsuN+UovrCffF/U4PsDtzNmuGST2p7diwxSa6NPlS+i4Og9FsXqtZqcab2zxQyJPxjKrfnU6vyQHV0UgSKSASRSQ0igJSHQ6KSAlIaRdDSAlIdFUOgI2jougoCaCikhgTQ6KoKAihNGSg2gY6CjJtCgNQxUMAFQDABNCooKAVBQwAW0KKoKAmh0OgoCUilEdFJAcN6e6dv1m1qtuKco+PE039Ix+nkcb6PdpY9NNzUbyO7u0tu1qMb55t307juvxHwNYo5U2ltlje3rfWvPjd/jPMtHl9XfEZNPpKClx3NWmvsB2WDtxRz4s08W2EqUnF7lGbXffVX3pfI3fZGvjk1ProY5K/U441Tlsc3vb8Y1t+3gcP2nro5YY36hLLCO6WR44Q9lO6Sikn3HQ/hrqHPUKFbtuNuUv3EopL/ADyYHpyRSQJFJACQ6GkVQCSGkNIpIBUNIaGkAqGkNIaAEgoYUAqCiqHQE0Oh0OgJoKKoNoE0FFbQ2gaQBpDAmhUVQUBNAVQUBNFUFDAVBQ6AAAdDoCSkgSKSA+DtrsuOrwzwTbjupxkkrjJdGvv9WeLdpaeWn3YpKpRltckntml0a8OD3fLkjCLlOSjGKttnmPpLKMcrzU/VZr+SndMDioZZzWxJu+D0X0Lx/osVUbbW7I11cq6fCvyOL0uRQXDtvi66rxOv7G1PspcW1fzQHfYu08T/AG9r8Jpqv6H14s0J+7OMv5ZJnB6vI5SqDW5xXCfl4EYNXJSpuNxaVSu78vAD0VIdHNaf0k2SWKUHOVJqTlSr4v3jdYu0U+sJL4U0B9tAGOakri7RdAJIYDoBDQ0h0Ah0NIdAJIdDoEgFQ6GMBUFDoKAVBRVABoQKFQCAdBQCAdBQCQ6GCAKCigAVAOhpAJHx9rdpw0uNzly3xCN1b/4RXanaWPS43lyypLol70n4JHm/pV23+kyhKKaW11BvhR7r8WwPh9IfSXNqZ1GTfgopqMee5f1Fr9V/t8WF3OUYJSa5/wAZ8+nyNYpKkm5N2kk6pcfmYU9itt23+QHyZIyhse11Kvk+9G9x48ihGeGauuYytNfA+PW5k9jS73dd7rjgnT6x01fyA3Wg1U4++rb7/GzPqXz6yPP7y7/ijU6fUtm70/tJdU/FdQM2mz71Fru5Un+R0Wj7QVR5VNcq/kcjqMTx3KFOvej4+a8H5FYu0OGk/Br/AD7/ADA9C0+qUWpJ8cbl1tG5R57odc2ut+H0O27I1W+EYvicYr5x8QPtodFJAkAh0Oh0AhpAOgEOh0OgFQUWkFATQ0iqCgJoodABzwUMYEsBgAgHQUAqKAKAEh0A0AJDoEikBwXp/PdLGm/ZU7l4NJdDhMue25Pq3fh1Ot9LMryX/DkbfwfC/NHOdnaHfOcpe7iipNeMm6S+z+gGFPhXf/Jgy+073Mza2Vyf2PmXPeBWpvbG6dPu6hifHX5E5/d4btUY066gbDTSp9X8jedn5+VfwOZx5aNjoNcunnXXn6eAHU6+HrMb2+8l7L6NP496OS0eaWW3CLdK5Jd1/wDw3SzylGSjfuu2ua46mh9Gc7hOKTpyUo/Nd32YG/7I1u18ro6f9zt9Dq21GUXzHldPp8Dz2Ot3ZJ7Y1ufKSNp2N2q1LZLu4A9a0+RTjGa6SV/DyMhrfRzJuwvm6nJefKT/AKs2lAKgoqh0BNDoqgoBUNIaGkAqHQ6HQCQUVQ6AlIe0pIdAc0AkUkAqChjAmh0OgoBDHQAA0gQwAAGkB5r6W4fV558XCSa+Ku+PNM1XY+Zb54m1+sinH+KUb4+jb+RfpnrJvU5Un7KduL6eFnNPK37SbUou+Hyq715gbDteGyTXSz4Io+/Bqf0ySjlivWQjcZrjel4xXf8AD6HyahcuKq7ql3+doD5tRPik+fIxY8zXWN/MzPFtdPr5MxwSXdfPeBmxzb52/c+vBBtrhK+9vhD0mlhkdJ1xx3G07NxKpR2xlXs7pe4v7gZMDUYSSytuukE/uzmMWTZkdPpPcvjZ1ebG8SSUlsl0UI02/wDgj0W9Fv8AUMmeKl6vbjlNZGrSy/sJ+V9fJMDV6XN+tbVVdq+9PnvNp6u2sseOVup919TQajHPBkliyRcMuObhOElypLu/zyOh7HyuUKe1p8e7Tr5AejehGovfC+sVJfJ0/wA0dWkec+hGp26iEG/3oOvFp196PSAEMdDQEpDodDSASQx0MBUMdDoBJDSKSCgFQ6Gh0By6Q0IaAGCGAAAAA0MSGADQhoAoaGgA8o9Muz3HWZIte+t0PNPk5CS2S6eTR6x6eaNTenyV+1LHa68p192eW6ziTUrTTfP9AJ7Llt1OFq/+oo8eEvZ/r9ja67FtzTbj70edq/aT4f36l+gXZ71GvwXHdHHJTk+5Rgm/zSXzMva+eOPVzjdxanCD602+H/QDn8kpN+635+KMMU22qrxs+6eRbuXyuOpgzSW66+982B9+g7Py2nGpX05NjpMElJ75ptS9nHG/al5vwNbodfKMl3UqXmbbQTi5O17XKcrdrnp5cgZe0puKXPXq49HLpXwSPVPRDsVaPTQhS9ZNLJlf8bXu/BdPr4nB9m9lrPq9Ljl7kcm6S/hgnPb89vPxPVwOF/FvQ4HonnlDGtSsmHHiyVWSScvahfetm90/A4PsRbXG03Got+Uq5N7+MOrlPVabTW9mPB67b3OeSco38lj+7NB2ZKo2urdNeAG97Gzf7qMFxKWWCUvjJUz1+jy/0U0ccmtwSa6Nzfxgm1+SPUkgFQ0ikhAADoYCSGkNIpICUhpFBQCGh0ABQ6GAHKDQigAAGgEOh0AAA0FAFFUCGkAJFUCGB8Pa+j9dhlFe9Gpwvpvjyl8+nzPEe3sH6xtJuEuU+9eK+N8Hvh5/6U+ikoetyYkp4Zylk217WGb5f/a/HuA8/wDRbV5MOs07xy2v1u2/KScXa7+GzJ2k09R7XTerv4nx58MseRUpRmppwr96/ZaffzRtu0tH+snJtb6i26qLk43dfzJgfJr4xjNqMYrnwu0zDkltlxtVpdCNbNNp8u4p9a53cr5GDct9d3Hf3UwN7pdVFqTaXEXTrm6MvY+RKn0bf2vhmowSjtfHW657/wDKK0ie6Kcqvr/KvAD1X0Iw+t1Dyp3HDjaXP7c+F9tx3Z5H6N9ofouRPH3dY2/1kH1i/p8meqaTW48yTx5Iy9mMnFNboqXTdHquj6+AHi34qSf+qZbfCxafZXdD1a4/8t31Nf2bne6P8PD8Gn1RsvxVp9q5KT9nBp9/x2t/k4mq7Jhbvxav4WB6f+HunvLly90I7V195/2s71Gh9DdH6rSwtVLJeSXjz0+yX1N9EBgCHQCQ0h0NIASGkAwAB0OgFQ6GMBJDCgA5NFIQ0AUMAAAAAGhoAQDKJKApAAAA0IaA4z0y7DwYlHVRjtrInKCS2XTluX7r9np08jgc+rjKcZxakpQcXT6UuOvid5+Juu24YYopuTuTpXSaaXHjw/8AGeS0uu1+bjJqviBlz6edpKE+ibe1pK33t8LoYlppN3KeONrhPJFuq8I2zIslxmvWPakpO5N2ulcvzR8sMiUuX3Vck2/oB9mSow950ra/Zt/Pn7H1QyOLTxwxq4x9+Tk7rl9V3mrnJO0t3P7TjX3Z9nZmNbJ3y1KNVtuuj68d6+oG7wbpr2tRT8Ma2/8AtZ2H4d5I49W1Fyk8+PbclT9hSlRx+ij0UcTv97LG6fwNhptbl07ebFkjDLDHkcW0tu7Y4pff7Aaz0t7QWp7T12T9ne8UX19nEljv5uLfzN36E9lfpGoxwfML3z/ki7f1pL5nI6DFdNttytbru+U2348ntf4e9lLDpvXte3ndrxWJPhfN2/oB1kVSSSpJUkuiRSQIaAaKQhgBVCGAFCRQBQwRQCSAYAIRTADkhoAAYAAANAADBDABjAAKAAABoAA8i/EPU5Xrcqk1shGOOCj+7tUrfncn9TlYzhJ+2qf7ybUl8+8AAy6XSe1Lc04y2RjKuacr8OvCIzYIp3Dvb95q+rfcAAY4Yd3XHF+e4yXsdw44apuMouL4cWvAAA+rBqp/xRjS49Za+Sa6fM2WN+sTgoycppwbtOlLi17bv6AAGDsPs95JQhbtz2ez1btLj7H6C02njihDHBVGEVCK61FKkgADKigABoYAA0MAAqJQAA0hgABQ0AADQUIAP//Z" referrerpolicy="no-referrer" alt="L'histoire de GigaChad, l'ultra-masculin mi-mème, mi-légende urbaine"></p><p><span>Dit is Tim nadat hij een TCP packet naar uw mama heeft gestuurd.</span></p><p>&nbsp;</p><h4 id='address-leases'><span>Address Leases</span></h4><ul><li><p><strong><span>DHCP</span></strong><span> is not for permanent address allocation</span></p></li><li><p><span>Addresses are leased for a specific period depending on the environment</span></p><ul><li><span>Shorter leases more efficiently allocate space.</span></li><li><span>–Longer leases lower load on the DHCP server.</span></li></ul></li></ul><p>&nbsp;</p><h4 id='dhcp-message-format'><span>DHCP Message Format</span></h4><p><span>Don&#39;t think this is important since there are more than 100 options defined.</span></p><p>&nbsp;</p><h4 id='dhcp-discovery'><span>DHCP Discovery</span></h4><p><img src="img/image-20220519144114485.png" referrerpolicy="no-referrer" alt="image-20220519144114485"></p><p><img src="img/image-20220519144139951.png" referrerpolicy="no-referrer" alt="image-20220519144139951"></p><h4 id='renewing-a-lease'><span>Renewing a Lease</span></h4><p><img src="img/image-20220519144205021.png" referrerpolicy="no-referrer" alt="image-20220519144205021"></p><h4 id='releasing-an-address'><span>Releasing an Address</span></h4><p><img src="img/image-20220519144230134.png" referrerpolicy="no-referrer" alt="image-20220519144230134"></p><h4 id='duplicate-address-detection'><span>Duplicate Address Detection</span></h4><p><span>After assignment of an IP address, hosts will perform </span><strong><span>duplicate address detection</span></strong></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> if the clients detects a duplicate address, it refuses the offered IP address with a </span><strong><span>DHCPDECLINE</span></strong><span> message.</span></p><p><span>We use </span><strong><span>ARP</span></strong><span> for this.</span></p><p>&nbsp;</p><p>&nbsp;</p><h3 id='domain-name-system-dns'><span>Domain Name System (DNS)</span></h3><p><strong><span>A few notes</span></strong></p><p><img src="img/image-20220519145337860.png" referrerpolicy="no-referrer" alt="image-20220519145337860"></p><p>&nbsp;</p><h4 id='hierarchical-domain-addresses'><span>Hierarchical Domain Addresses</span></h4><p><span>We use hierarchy to manage the complexity of DNS lookup and to enable distribution.</span></p><p><span>Consider a domain name:</span></p><p><strong><span>nix.cs.kuleuven.ac.be</span></strong></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Hierarchy is embedded in the name from biggest on right(country), to smallest on left(machine).</span></p><p><img src="img/image-20220519145817365.png" referrerpolicy="no-referrer" alt="image-20220519145817365"></p><h4 id='top-level-domains'><span>Top Level Domains</span></h4><p><span>3 groups of Top Level Domains</span></p><ul><li><p><span>2-letter country codes ex. BE, FR, NL</span></p></li><li><p><span>generic names (similar organisations)</span></p><ul><li><span>com - commercial organisations</span></li><li><span>org - non commerical organisations</span></li></ul></li><li><p><span>names of organisations within USA</span></p><ul><li><span>edu - universities</span></li><li><span>gov - US government</span></li><li><span>mil - US army</span></li></ul></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> administration for the next level down is delegated to registrars to manage complexity</span></p><p>&nbsp;</p><h4 id='benefits-of-hierarchy'><span>Benefits of Hierarchy</span></h4><ul><li><span>We build on the hierarchy of the name-space when storing DNS data, avoiding bottle-necks</span></li><li><span>We reduce management complexity by delegating responsibility</span></li><li><span>We allow for appropriate regional controls of this global resource</span></li></ul><p><img src="https://raidboxes.io/wp-content/uploads/2021/12/dns-example-2.png" referrerpolicy="no-referrer" alt="Wat is de DNS? Domeinnaamsysteem uitgelegd » raidboxes®"></p><h4 id='side-note-for-recursive-and-iterative-dns'><span>Side note for Recursive and Iterative DNS</span></h4><p><img src="https://miro.medium.com/max/1400/0*7d3wrIM0G2RDnJi7.png" referrerpolicy="no-referrer" alt="DNS Queries — Recursive and Iterative | by Geeky much! | Networks &amp;  Security | Medium"></p><p><span>When the DNS lookup is </span><strong><span>iterative</span></strong><span>, the resolver or Local DNS server will itself make every request to the different DNS servers in the hierarchy. As you can see above. </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="2.007ex" role="img" focusable="false" viewBox="0 -694 777.8 887" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.437ex;"><defs><path id="MJX-41-TEX-N-2191" d="M27 414Q17 414 17 433Q17 437 17 439T17 444T19 447T20 450T22 452T26 453T30 454T36 456Q80 467 120 494T180 549Q227 607 238 678Q240 694 251 694Q259 694 261 684Q261 677 265 659T284 608T320 549Q340 525 363 507T405 479T440 463T467 455T479 451Q483 447 483 433Q483 413 472 413Q467 413 458 416Q342 448 277 545L270 555V-179Q262 -193 252 -193H250H248Q236 -193 230 -179V555L223 545Q192 499 146 467T70 424T27 414Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2191" xlink:href="#MJX-41-TEX-N-2191"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(777.8,0)"></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">↑</mo><mrow data-mjx-texclass="ORD"></mrow></math></mjx-assistive-mml></mjx-container><script type="math/tex">\uparrow{}</script><span> </span></p><p><span>When the DNS lookup is </span><strong><span>recursive</span></strong><span>, each server along the route will make the request itself to the next server in the hierarchy. As you can see above. </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="2.007ex" role="img" focusable="false" viewBox="0 -694 777.8 887" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.437ex;"><defs><path id="MJX-41-TEX-N-2191" d="M27 414Q17 414 17 433Q17 437 17 439T17 444T19 447T20 450T22 452T26 453T30 454T36 456Q80 467 120 494T180 549Q227 607 238 678Q240 694 251 694Q259 694 261 684Q261 677 265 659T284 608T320 549Q340 525 363 507T405 479T440 463T467 455T479 451Q483 447 483 433Q483 413 472 413Q467 413 458 416Q342 448 277 545L270 555V-179Q262 -193 252 -193H250H248Q236 -193 230 -179V555L223 545Q192 499 146 467T70 424T27 414Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2191" xlink:href="#MJX-41-TEX-N-2191"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(777.8,0)"></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">↑</mo><mrow data-mjx-texclass="ORD"></mrow></math></mjx-assistive-mml></mjx-container><script type="math/tex">\uparrow{}</script><span> </span></p><p><strong><span>Recursive</span></strong><span>: the local name-server does not return partial information</span></p><p><strong><span>Iterative</span></strong><span>: The root name server only returns partial information</span></p><p><strong><span>Note:</span></strong><span> NS other than the local NS may operate recursively, but it is rare due to overhead.</span></p><p>&nbsp;</p><h4 id='non-overlapping-zones'><span>Non-Overlapping Zones</span></h4><p><span>We divide the name-space into non-overlapping zones.</span></p><p><span>Each zone&#39;s administrator is responsible for drawing the boundaries of internal zones:</span></p><ul><li><span>Load balancing</span></li><li><span>managing overhead of many servers</span></li><li><span>May follow organizational boundaries</span></li></ul><p>&nbsp;</p><p><img src="img/image-20220519164944129.png" referrerpolicy="no-referrer" alt="image-20220519164944129"></p><p>&nbsp;</p><h4 id='dns-messages'><strong><span>DNS Messages</span></strong></h4><p><img src="img/image-20220519165125215.png" referrerpolicy="no-referrer" alt="image-20220519165125215"></p><p>&nbsp;</p><h3 id='discovery-protocols-napster-gnutella'><span>Discovery Protocols (Napster, Gnutella)</span></h3><p><span>Quick example:</span></p><h4 id='napster'><strong><span>Napster</span></strong></h4><ul><li><p><span>Was one of the earliest P2P applications</span></p></li><li><p><span>Napster was able to implement a large-scale music download service without paying for (many) servers and high bandwidth connections.</span></p></li><li><p><span>The infrastructure was provided largely for free by the users</span></p><p>&nbsp;</p></li></ul><p><img src="img/image-20220519170745541.png" referrerpolicy="no-referrer" alt="image-20220519170745541"></p><p><span>Steps in </span><strong><span>Napster</span></strong></p><ol start='' ><li><span>Ask server for list of locations of files</span></li><li><span>List of peers offering the files</span></li><li><span>Request file from certain peer</span></li><li><span>File delivery</span></li><li><span>Index update</span></li></ol><p>&nbsp;</p><h4 id='the-p2p-application-pattern'><span>The P2P Application Pattern</span></h4><p><span>Peer to peer is nice because it barely requires any servers. The incentive is that you can download files for free from peers while in exchange other peers can do the same from you.</span></p><p>&nbsp;</p><h5 id='p2p-app-\n≠\n-p2p-network'><span>P2P App </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="2.106ex" role="img" focusable="false" viewBox="0 -716 778 931" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.486ex;"><defs><path id="MJX-42-TEX-N-2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="2260" xlink:href="#MJX-42-TEX-N-2260"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≠</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">\ne</script><span> P2P Network</span></h5><ul><li><span>A P2P application re-uses edge resources to provide a service. It may, or may not use a P2P network</span></li><li><span>Centralization limits scalability</span></li><li><span>If you know about data, you may be responsible for it</span></li><li><span>What happens to the services when the server fails?</span></li></ul><p>&nbsp;</p><h5 id='important-note'><span>Important Note</span></h5><p><span>While application-level networks provide a conceptual routing substrate, each application-level hop may map to several hops at the network layer. Thus it is critical that we keep the amount of application-level hops to a minimum.</span></p><p>&nbsp;</p><h4 id='gnutella-04'><span>Gnutella 0.4</span></h4><ul><li><span>Gnutella supports peer-to-peer resource discovery.</span></li><li><span>Gnutella builds an </span><strong><span>unstructured decentralised overlay network</span></strong><span> on top of </span><strong><span>TCP/IP</span></strong></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Gnutella does the same job as Napster without any servers:</span></p><ul><li><span>No single point of failure, or attack</span></li><li><span>No need to provision powerful indexing servers.</span></li></ul><p><span>Legally speaking, there is no single </span><strong><span>Gnutella</span></strong><span> entity to target so there is no one to sue.</span></p><p><span>Privacy: Limited anonymity is provided as each user only has the details of its neighbours.</span></p><p>&nbsp;</p><h5 id='gnutella-messages'><span>Gnutella Messages</span></h5><p><img src="img/image-20220519172255281.png" referrerpolicy="no-referrer" alt="image-20220519172255281"></p><p>&nbsp;</p><p><span>There are 3 phases to the Gnutella cycle</span></p><ul><li><span>Connection</span></li><li><span>Search</span></li><li><span>File Transfer</span></li></ul><h5 id='connecting-a-new-peer'><span>Connecting a New Peer:</span></h5><p><img src="img/image-20220519173006833.png" referrerpolicy="no-referrer" alt="image-20220519173006833"></p><p><img src="img/image-20220519173142880.png" referrerpolicy="no-referrer" alt="image-20220519173142880"></p><p><img src="img/image-20220519173207220.png" referrerpolicy="no-referrer" alt="image-20220519173207220"></p><p><img src="img/image-20220519173223168.png" referrerpolicy="no-referrer" alt="image-20220519173223168"></p><p><img src="img/image-20220519173234906.png" referrerpolicy="no-referrer" alt="image-20220519173234906"></p><p><img src="img/image-20220519173254178.png" referrerpolicy="no-referrer" alt="image-20220519173254178"></p><p><img src="img/image-20220519173325540.png" referrerpolicy="no-referrer" alt="image-20220519173325540"></p><p><img src="img/image-20220519173335855.png" referrerpolicy="no-referrer" alt="image-20220519173335855"></p><p><strong><span>Short explanation for connecting to the Gnutella network</span></strong></p><p><span>So in short, A new-arriving peer connects to an initial peer by initiating TCP connections to that host. This peer will then broadcast a PING message which &#39;floods the netwerk&#39;</span></p><p><span>Available peers that receive a ping should respond with a PONG, which contains the network address and port on which the sending peer is listening for Gnutella connections. The Pong message is forwarded back along the path of the incoming PING</span></p><p><span>Broadcast messages are tagged with a TTL. Peers decrement the TTL, discarding where TTL = 0</span></p><p><span>Incoming peers will establish eight connections.</span></p><p>&nbsp;</p><h5 id='searching-for-a-file'><span>Searching for a file</span></h5><p><img src="img/image-20220519174205702.png" referrerpolicy="no-referrer" alt="image-20220519174205702"></p><p><img src="img/image-20220519174216328.png" referrerpolicy="no-referrer" alt="image-20220519174216328"></p><p><img src="img/image-20220519174228964.png" referrerpolicy="no-referrer" alt="image-20220519174228964"></p><p><img src="img/image-20220519174304690.png" referrerpolicy="no-referrer" alt="image-20220519174304690"></p><p><img src="img/image-20220519174316321.png" referrerpolicy="no-referrer" alt="image-20220519174316321"></p><p><strong><span>Short explanation for searching for a file in the Gnutella network</span></strong></p><p><span>Peers listen for incoming QUERY messages, and contribute to their broadcast across the network by flooding them to each of their neighbours, while decrementing their TTL value.</span></p><p><span>If a peer has the requested file from the QUERY, it responds by sending a QUERYHIT message back along the path of the incoming QUERY.</span></p><p><span>QUERYHIT messages contain the network address and port on which the responding peer is listening for HTTP file-transfer connections.</span></p><h5 id='file-transfer-from-peer-to-peer'><span>File Transfer from peer to peer</span></h5><p><img src="img/image-20220519174656900.png" referrerpolicy="no-referrer" alt="image-20220519174656900"></p><p><img src="img/image-20220519174707963.png" referrerpolicy="no-referrer" alt="image-20220519174707963"></p><p><img src="img/image-20220519174720648.png" referrerpolicy="no-referrer" alt="image-20220519174720648"></p><p><strong><span>Short explanation for the file transfer</span></strong></p><p><span>When requesting peer receives a QUERYHIT message, it can attempt to initiate a direct download, from the target peer (whose port and IP address were specified in the QUERYHIT message) via HTTP.</span></p><p><span>However, if the target peer is behind a firewall, the requesting peer can instead send PUSH message to the target, containing details of the file request.</span></p><p><span>On receiving a PUSH, the target peer establishes the HTTP connection and pushes the file.</span></p><p>&nbsp;</p><h5 id='shortages-of-gnutella-04'><span>Shortages of Gnutella 0.4</span></h5><ul><li><span>The flat network structure of Gnutella results in high load due to broadcast.</span></li><li><span>Nodes are heterogeneous. Should my phone do the same share of work as my server?</span></li></ul><h4 id='gnutella-06'><span>Gnutella 0.6</span></h4><h5 id='upgrade-of-gnutella-06'><span>Upgrade of Gnutella 0.6</span></h5><ul><li><span>Only ultra-peers participate in peer discovery. Leaf-nodes always connect to an ultra-peer</span></li><li><span>When a leaf node connects to an ultra-peer it uploads a complete list of its resources</span></li><li><span>File discovery messages are only sent to leaf-nodes where they host a matching file.</span></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> This way </span><strong><span>leaf nodes</span></strong><span> do not participate in discovery, reducing their load.</span></p><h5 id='requirements-for-ultrapeers'><span>Requirements for Ultrapeers:</span></h5><ul><li><span>No firewall</span></li><li><span>Sufficient Bandwidth</span></li><li><span>Sufficient Uptime</span></li><li><span>Sufficient RAM and CPU</span></li></ul><p><span>Gnutella 0.6 improves on the scalability of Gnutella 0.4</span></p><ul><li><span>By exploiting the resources available on strong nodes</span></li><li><span>conserving the resources available on weak nodes</span></li></ul><p>&nbsp;</p><h3 id='file-transfer-protocols-bittorrent'><span>File Transfer Protocols (Bittorrent)</span></h3><p><span>BitTorrent is thet most popular P2P network today, accouting for up to 35% of Internet traffic</span></p><ul><li><span>Gnutella is designed for resource discovery</span></li><li><span>BitTorrent is designed for </span><strong><span>efficient content distribution</span></strong></li></ul><p>&nbsp;</p><h4 id='the-complete-file-sharing-problem'><strong><span>The Complete File Sharing Problem</span></strong></h4><h5 id='q1-how-to-discover-the-location-of-files-to-download'><strong><span>Q1: How to discover the location of files to download</span></strong></h5><p><span>A1: Each torrent provides connection details of &#39;trackers&#39; that know addresses of peers downloading this file: </span><strong><span>the swarm</span></strong><span>. Each file is broken into many small chunks. Each chunk is identified by an SHA-1 hash key. On connection, addresses of the swarm are transferred from the tracker</span></p><h5 id='q2-how-to-optimally-replicate-content-to-peers'><span>Q2: How to optimally replicate content to peers</span></h5><p><span>A2: Peers should both download and upload chunks. Peers with all chunks are seeders. Peers share lists of chunks and download the rarest first, optimizing availability.</span></p><h5 id='q3-how-to-encourage-users-to-upload'><span>Q3: How to encourage users to upload</span></h5><p><span>BitTorrent tackles the problem of Free-riding by implementing a &#39;tit-for-tat&#39; trading scheme. Peers measure download performance. Trading continues only with peers offering high download speed. Over time this matches peers with similar speeds. Free-riders are cute off, or &quot;choked&quot;</span></p><p>&nbsp;</p><p><img src="img/image-20220519212701812.png" referrerpolicy="no-referrer" alt="image-20220519212701812"></p><p>&nbsp;</p><h3 id='secure-shell-ssh'><span>Secure Shell (SSH)</span></h3><p><strong><span>SSH</span></strong><span> solves two key problems:</span></p><ul><li><span>Telnet does not offer server authentication</span></li><li><span>transmits the user credentials in the open</span></li></ul><h4 id='ssh-connection'><span>SSH Connection</span></h4><ol start='' ><li><span>Open up a TCP connection between the two machines (doesn&#39;t need to be TCP but needs to be reliable)</span></li><li><span>Packet is made with the packetlength, paddingamount, payload, padding and message authentication code(To see the packet hasn&#39;t been changed).</span></li><li><span>Packet is encrypted except for the packetlength and the message authentication code.</span></li></ol><p><img src="img/image-20220520104717660.png" referrerpolicy="no-referrer" alt="image-20220520104717660"></p><h4 id='public-key-cryptography'><span>Public Key Cryptography</span></h4><p><img src="img/image-20220520110006847.png" referrerpolicy="no-referrer" alt="image-20220520110006847"></p><h4 id='ssh-authentication'><span>SSH Authentication</span></h4><p><img src="img/image-20220520110018869.png" referrerpolicy="no-referrer" alt="image-20220520110018869"></p><h4 id='anonymity'><span>Anonymity</span></h4><ul><li><span>Anonymity in P2P protects the user from censorship</span></li><li><span>On the other hand, it provides a cover for illicit behaviour</span></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Let us look at an anonymous P2P system</span></p><p>&nbsp;</p><h3 id='onion-routing-technique'><span>Onion Routing Technique</span></h3><p><span>In onion routing, messages are encrypted as they travel along each point in a circuit of nodes called onion routers</span></p><p><span>Each router removes one layer of encryption to reveal next-hop routing instructions and routes the message along its way.</span></p><p><span>Intermediate nodes do not know the origin, destination or content; only the next hop. Like an onion we have </span><strong><span>many layers of privacy</span></strong></p><p><img src="img/image-20220520111751276.png" referrerpolicy="no-referrer" alt="image-20220520111751276"></p><p>&nbsp;</p><h3 id='tor-general-approach'><span>TOR: General Approach</span></h3><p><span>TOR client obtains a lot of TOR routers from the directory server</span></p><p><span>TOR client picks a random path through the TOR network, terminating at an exit node.</span></p><ul><li><span>All links are encrypted except for the outgoing link from the exit node.</span></li></ul><p><span>When the client downloads a different file, they create a whole new path.</span></p><h4 id='security'><span>Security</span></h4><ul><li><span>Cannot prevent a </span><strong><span>Sybil attack</span></strong><span>, but is designed to make this difficult. </span></li></ul><p><span>A </span><strong><span>Sybil attack</span></strong><span> is one where an attacker pretends to be so many people at the same time. It is one of the biggest issues when connecting to a P2P network. It manipulates the network and controls the whole network by creating multiple fake identities. To a single view, these different identities look like regular users, but behind the scenes, a single entity is called an unknown attacker who controls all these fake entities at once. </span></p><p>&nbsp;</p><ul><li><p><span>An adversary can:</span></p><ul><li><span>Generate, modify, delay and delete traffic</span></li><li><span>Operate onion routers</span></li><li><span>Compromise many onion routers</span></li></ul></li><li><p><span>TOR protects against traffic analysis attacks and thus is resistant to monitoring and censorship</span></p></li></ul><h4 id='tor-architecture'><span>TOR Architecture</span></h4><ul><li><p><span>All connections between nodes are TLS secured</span></p></li><li><p><span>Each client node runs </span><strong><span>Onion Proxy(OP)</span></strong><span>:</span></p><ul><li><span>Offers a </span><strong><span>SOCKS</span></strong><span> interface to applications</span></li><li><span>Discover routers by querying servers</span></li><li><span>Establishes circuits on the overlay</span></li></ul></li><li><p><span>A client != an </span><strong><span>Onion Router(OR)</span></strong></p></li></ul><h4 id='onion-routers'><span>Onion Routers</span></h4><p><span>Each router maintains a set of keys that are used to sign descriptors of the router for the directory</span></p><p><span>Onion routers may act as an exit point, or a forwarding point along a circuit (as dictated by the Onion Proxy client)</span></p><p><span>TOR security is based on public key cryptography</span></p><p>&nbsp;</p><h4 id='tor-cells'><span>TOR Cells</span></h4><ul><li><p><span>Traffic is encapsulated in fixed-size cells, with header containing:</span></p><ul><li><span>Circuit ID header (circID) to determine which circuit the cell refers to.</span></li><li><span>Descriptor of cell&#39;s payload type</span></li></ul></li><li><p><span>Control cells are interpreted by the receiving node</span></p></li><li><p><span>Relay cells carry end-to-end data and an 2nd header containing necessary meta-data</span></p></li></ul><h4 id='important-commands'><span>Important Commands</span></h4><p><img src="img/image-20220520133019203.png" referrerpolicy="no-referrer" alt="image-20220520133019203"></p><p>&nbsp;</p><h4 id='tor-circuits'><span>TOR Circuits</span></h4><ol start='' ><li><span>We begin by establishing a connection to known OR using &#39;relay begin&#39;</span><img src="img/image-20220520134117572.png" referrerpolicy="no-referrer" alt="image-20220520134117572"></li><li><span>We then extend as necessary with relay extend</span><img src="img/image-20220520134157920.png" referrerpolicy="no-referrer" alt="image-20220520134157920"><img src="img/image-20220520134219514.png" referrerpolicy="no-referrer" alt="image-20220520134219514"></li><li><span>Once established, we can tunnel our traffic to the exit router</span></li></ol><p><img src="img/image-20220520134251972.png" referrerpolicy="no-referrer" alt="image-20220520134251972"></p><h4 id='establishing-a-tcp-connection'><span>Establishing a TCP Connection</span></h4><p><img src="img/image-20220520134337711.png" referrerpolicy="no-referrer" alt="image-20220520134337711"></p><h2 id='chapter-2-the-transport-layer'><span>Chapter 2 The Transport Layer</span></h2><h3 id='the-transport-layer'><span>The Transport Layer</span></h3><ul><li><span>Provides end-to-end delivery of data encapsulated in segments using virtual circuits</span></li><li><span>Strives for efficiency, relatiability and cost effectiveness</span></li><li><span>Transport layer is implemented by libraries running on hosts</span></li></ul><p><img src="img/image-20220520134930790.png" referrerpolicy="no-referrer" alt="image-20220520134930790"></p><h4 id='connectionless-transport'><span>Connectionless Transport</span></h4><p><span>Connectionless transport just wants to be fast and simple, no extra stuff and that shows in the limited error control and flow control.</span></p><h4 id='connection-oriented-transport'><span>Connection-oriented Transport</span></h4><ul><li><span>Focused upon providing reliable communication. Handles lower-layer errors</span></li><li><span>Minimizes complexity and ensures a good separation of concerns</span></li><li><span>Three phases of interaction</span></li></ul><p><strong><span>Connection-oriented transport</span></strong><span> is different because it focuses on providing reliable communication and does handle errors. Also tries to minimize complexity</span></p><p><strong><span>Three</span></strong><span> phases of interaction:</span></p><ul><li><strong><span>Establishment</span></strong><span> (connection setup)</span></li><li><strong><span>Data Transfer</span></strong><span> (application interaction)</span></li><li><strong><span>Release</span></strong><span> (connection tear-down)</span></li></ul><p>&nbsp;</p><h4 id='segment-encapsulation'><span>Segment Encapsulation</span></h4><ul><li><span>units of transmission at the transport layer =&gt; segments</span></li><li><strong><span>Segments</span></strong><span> at the transport layer are contained in </span><strong><span>packets</span></strong><span> at the network layer, which are in turn contained in </span><strong><span>frames</span></strong><span> at the data link layer</span></li></ul><p><img src="img/image-20220520140311499.png" referrerpolicy="no-referrer" alt="image-20220520140311499"></p><h4 id='generalized-transport-primitives'><span>Generalized Transport Primitives</span></h4><p><img src="img/image-20220520140809060.png" referrerpolicy="no-referrer" alt="image-20220520140809060"></p><h3 id='berkeley-sockets-bs'><span>Berkeley Sockets (BS)</span></h3><p><span>Just a normal socket uwu</span></p><p>&nbsp;</p><h4 id='bs-state-machine'><span>BS State Machine</span></h4><p><img src="img/image-20220520141429384.png" referrerpolicy="no-referrer" alt="image-20220520141429384"></p><p>&nbsp;</p><h3 id='compare-to-the-data-link-layer'><span>Compare to the Data Link Layer</span></h3><p><span>The Transport Layer provides many similar services to the Data Link Layer such as error control, flow control and sequencing</span></p><p><span>The key difference is:</span></p><ul><li><span>The Data Link Layer provides communication between two hosts on the same physical link, while...</span></li><li><span>Hosts at the Transport Layer may be separated by a whole network</span></li></ul><p><img src="img/image-20220520142148797.png" referrerpolicy="no-referrer" alt="image-20220520142148797"></p><p>&nbsp;</p><h3 id='elements-of-transport-layer-protocols'><span>Elements of Transport Layer Protocols</span></h3><p><span>We will look at four critical elements of transport layer protocols</span></p><ol start='' ><li><span>Addressing</span></li><li><span>Connection Management</span></li><li><span>Error Control</span></li><li><span>Flow Control</span></li></ol><p>&nbsp;</p><h4 id='addressing'><span>Addressing</span></h4><h5 id='transport-service-access-points-ie-ports'><span>Transport Service Access Points i.e PORTS</span></h5><ul><li><span>Transport Service Access Points (TSAPs) define an end-point for transport layer traffic.</span></li><li><span>IP addresses are not enough because multiple processes running on the same host may concurrently exchange data.</span></li><li><span>Ports are an example of a TSAP</span></li></ul><p>&nbsp;</p><h5 id='network-service-access-points-ie-ip-addresses'><span>Network Service Access Points i.e IP-addresses</span></h5><h5 id='network-service-access-points-nsaps-define-an-end-point-for-network-layer-traffic'><span>Network Service Access Points (NSAPs) define an end-point for network layer traffic</span></h5><ul><li><span>IP addresses are an example of NSAP</span></li><li><span>Transport Service Access Points (TSAPs) define an end-point for transport layer traffic.</span></li></ul><h5 id='-1'><img src="img/image-20220520154240995.png" referrerpolicy="no-referrer" alt="image-20220520154240995"></h5><p><span>The explanations for this is quite simple. Across our network we identify routers and clients by their IP-address but once we reach the destination of the IP we are still left wondering for which application the message is. Then we use the port to identify where the message has to go next as can be seen on the image.</span></p><h5 id='tsap-address-assignment'><span>TSAP Address Assignment</span></h5><ul><li><p><span>Some ports are well known and permanently assigned:</span></p><ul><li><span>HTTP, SMTP, Telnet, SSH</span></li></ul></li></ul><h5 id='initial-connection-protocol'><span>Initial Connection Protocol  </span></h5><p><span>Some servers may only operate sporadically. So why run them all the time?</span></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Initial Connection Protocol (ICP) conserves resources:</span></p><ul><li><span>Process Server listens for connections on well known TSAP addresses</span></li><li><span>When a connection is received, the server process is started and passed the TSAP address.</span></li></ul><p><img src="img/image-20220520155320008.png" referrerpolicy="no-referrer" alt="image-20220520155320008"></p><p><span>Basically, why keep servers constantly running if they&#39;re not constantly needed. That&#39;s why we use the Initial Connection Protocol. </span></p><p><span>So if a host has the ICP service enabled and it receives a connection for a well known port, then the host wakes up the correct service and passes the connection to the now running correct service. </span></p><h5 id='multiplexing-using-tsaps'><span>Multiplexing Using TSAPs </span></h5><p><img src="img/image-20220520160555805.png" referrerpolicy="no-referrer" alt="image-20220520160555805"></p><p><span>Multiplexing is actually just taking signals from a lot of different cables and then going to one single cable and transmitting over that, as can be seen below.</span></p><p><img src="https://cdn.ttgtmedia.com/rms/onlineimages/multiplexing_and_demultiplexing-f_mobile.png" referrerpolicy="no-referrer" alt="What is multiplexing and how does it work?"></p><h4 id='connection-management'><span>Connection Management</span></h4><h5 id='problems-of-connection-management'><span>Problems of Connection Management</span></h5><ul><li><span>Transport Layer protocols operate over a network with significant storage potential.</span></li><li><span>Some packets may travel slower or longer routes than others</span></li></ul><h5 id='out-of-order-packets'><span>Out of Order Packets</span></h5><p><img src="img/image-20220520160857358.png" referrerpolicy="no-referrer" alt="image-20220520160857358"></p><p><img src="img/image-20220520160906087.png" referrerpolicy="no-referrer" alt="image-20220520160906087"></p><p><img src="img/image-20220520160914104.png" referrerpolicy="no-referrer" alt="image-20220520160914104"></p><p><span>All the things above can cause the packets to arrive out of order, be lost entirely or duplicated.</span></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> A big problem - consider a bank transfer</span></p><p><span>We send a deposit to an un-trusted party. The packets take the scenic route and we assume they are lost. We resend the packets. The slow packets then arrive resulting in two transfers.</span></p><p><span>We can solve this by adding a life-time to the packet so that we can reject delayed or duplicated packets. This is now widely used in TCP.</span></p><ul><li><span>Bounded Packet Lifetime</span></li></ul><p><span>Each packet carries a </span><strong><span>sequence number</span></strong><span> that will not be re-used within </span><strong><span>T</span></strong><span> seconds (in reality some multiple of packet lifetime)</span></p><p><span>The standard Internet packet lifetime is 120s. Sequence numbers wrap around to 0. If a machine should crash it would lose the sequence numbers. We solve this by using a real time lock to provide initial sequence numbers during connection. Thus after a crash, hosts continue with a higher sequence number than before.</span></p><p>&nbsp;</p><h5 id='the-two-generals-problem'><span>The Two Generals Problem</span></h5><p><span>We have a partial solution. This problem cannot be cleanly solved by the transport layer alone. Higher-level protocols must be designed in such a way that they can tolerate abrupt disconnection. Where this is unacceptable, we must explore probabilistic approaches.</span></p><p>&nbsp;</p><h4 id='error-control'><span>Error Control</span></h4><h5 id='end-to-end-checksums'><span>End-to-End Checksums</span></h5><p><span>Checksums are fixed-size codes generated from larger data using simple hash functions. a consistent hash function is used that will generate the same checksum given the same data. Errors are detected by re-computing segment check-sum and comparing it to the provided value. It is highly unlikely that a packet could be corrupted and still match the provided checksum.</span></p><p><span>Each individual link is secure, so why isn&#39;t our end-to-end connection secure? Because packets can be corrupted within a malfunctioning router.</span></p><p>&nbsp;</p><h5 id='acknowledgements'><span>Acknowledgements</span></h5><p><span>Reliable packets require an acknowledgement so we must retransmit packets until an acknowledgement </span><strong><span>(ACK)</span></strong><span> is received.</span></p><p><span>If the receiver loses a sequence number, they may negatively acknowledge </span><strong><span>(NACK)</span></strong><span>, requesting resend.</span></p><p><span>This requires that the sender stores old messages until they have all been acknowledged</span></p><p><span>### </span></p><h4 id='flow-control'><span>Flow Control</span></h4><h5 id='sliding-windows-important'><span>Sliding Windows !Important!</span></h5><ul><li><span>Sliding window protocols tackle both error and flow control</span></li><li><span>Senders and receivers each maintain a window of messages for which no ACKs have been received.</span></li><li><span>The window is a sequence of message IDs, with a lower and upper bound.</span></li><li><span>By configuring the window size we can control the flow of packets into the network.</span></li></ul><p>&nbsp;</p><h3 id='sliding-window-protocol'><span>Sliding Window Protocol</span></h3><h4 id='window-size-1'><span>Window Size</span></h4><ul><li><p><span>Sliding window protocols may use a fixed window size, or adapt a window size.</span></p></li><li><p><span>The simplest approach is window of fixed size 1, or </span><strong><span>&#39;stop and wait&#39;</span></strong></p><ul><li><span>Send one segment and wait until it is acknowledged</span></li><li><span>A one-bit sequence number is used to detect duplicates</span></li></ul></li></ul><h4 id='stop-and-wait-operation'><span>Stop-and-Wait Operation</span></h4><ul><li><span>Sender keeps last segment until it receives ACK</span></li><li><span>Both data and ACKs are numbered alternately 0 and 1</span></li><li><span>Sender stores (</span><strong><span>S</span></strong><span>) with number of the last segment sent</span></li><li><span>Receiver stores (</span><strong><span>R</span></strong><span>) with number of next segment expected</span></li><li><span>Sender starts timer on segment send. If an ACK is not received before expiry, send assumes loss or damage and resends.</span></li><li><span>Receiver sends ACK with number of next segment when segment is intact. </span></li></ul><p><strong><span>In the following images frame should be segment because we are in the transport layer</span></strong></p><p><img src="img/image-20220520204844896.png" referrerpolicy="no-referrer" alt="image-20220520204844896"></p><p><img src="img/image-20220520204937753.png" referrerpolicy="no-referrer" alt="image-20220520204937753"></p><p><img src="img/image-20220520205037062.png" referrerpolicy="no-referrer" alt="image-20220520205037062"></p><p><img src="img/image-20220521102315946.png" referrerpolicy="no-referrer" alt="image-20220521102315946"></p><h5 id='summary-of-stop-and-wait'><span>Summary of Stop-and-Wait</span></h5><ul><li><span>The simplest sliding window protocol to implement</span></li><li><span>Uses very few resources (i,e buffer space is 1 on sender, 0 on receiver)</span></li><li><span>But it is inefficient if we have high RTT compared to speed</span></li></ul><p>&nbsp;</p><h4 id='go-back-n'><span>Go-Back-N</span></h4><h5 id='principles-1'><span>Principles</span></h5><ul><li><span>Segments have a larger range of sequence numbers, that wrap around to 0</span></li><li><span>We send </span><strong><span>W</span></strong><span> segments before requiring an </span><strong><span>ACK</span></strong></li><li><span>Keep a copy of the segments until </span><strong><span>ACKs</span></strong><span> arrive</span></li><li><span>This requires extended data structures and more variables than stop-and-wait</span></li></ul><h5 id='sender-window'><span>Sender Window</span></h5><p><img src="img/image-20220521102910719.png" referrerpolicy="no-referrer" alt="image-20220521102910719"></p><h5 id='receiver-window'><span>Receiver Window</span></h5><p><img src="img/image-20220521104122302.png" referrerpolicy="no-referrer" alt="image-20220521104122302"></p><h5 id='acknowledgement'><span>Acknowledgement</span></h5><p><img src="img/image-20220521104237456.png" referrerpolicy="no-referrer" alt="image-20220521104237456"></p><h5 id='normal-operation'><span>Normal Operation</span></h5><p><img src="img/image-20220521105451763.png" referrerpolicy="no-referrer" alt="image-20220521105451763"></p><p>&nbsp;</p><h5 id='segment-loss'><span>Segment Loss</span></h5><p><img src="img/image-20220521105601612.png" referrerpolicy="no-referrer" alt="https://www.youtube.com/watch?v=9BuaeEjIeQI"></p><p><span>quick vid:</span><a href='https://www.youtube.com/watch?v=9BuaeEjIeQI' target='_blank' class='url'>https://www.youtube.com/watch?v=9BuaeEjIeQI</a></p><p><span>So how does it actually work? Our sender can send an amount of segments indicated by the N in Go-Back-N. It will transmit that amount of segments before waiting for an </span><strong><span>ACK</span></strong><span> from the receiver. The receiver will only send one ACK at the time. Should a segment be lost or the ACK be lost then our sender will wait till a time-out and then resend all the segments in the current sliding window. If the sender receives an ACK for a segment it will slide the window to the right.</span></p><p>&nbsp;</p><h4 id='selective-repeat'><span>Selective Repeat</span></h4><h5 id='principles-2'><span>Principles</span></h5><ul><li><p><strong><span>Go-Back-N</span></strong><span> is bandwidth inefficient and slows down the transmission due to the repeated transmission of received packets</span></p></li><li><p><strong><span>Selective Repeat</span></strong><span> eliminates wasted retransmission of received packets. This is bandwidth efficient but</span></p><ul><li><span>Requires buffers at both send and receiver</span></li><li><span>Requires new variables and book-keeping</span></li></ul></li><li><p><span>A </span><strong><span>Negative ACK (NAK)</span></strong><span> reports the sequence number of a damaged or out-of-order segment.</span></p></li></ul><h5 id='sender-and-receiver-windows'><span>Sender and Receiver Windows</span></h5><p><img src="img/image-20220521110534829.png" referrerpolicy="no-referrer" alt="image-20220521110534829"></p><h5 id='lost-segments'><span>Lost Segments</span></h5><p><img src="img/image-20220521113810033.png" referrerpolicy="no-referrer" alt="image-20220521113810033"></p><h5 id='lost-acks'><span>Lost ACKs</span></h5><ul><li><span>If an ACK is lost then the segment timer will time out</span></li><li><span>This causes the segment to be individually retransmitted</span></li></ul><p>&nbsp;</p><h5 id='window-size-restriction'><span>Window Size Restriction</span></h5><p><img src="img/image-20220521113902651.png" referrerpolicy="no-referrer" alt="image-20220521113902651"></p><ul><li><strong><span>Note:</span></strong><span> window size must be equal to or less than half the size of our sequence numbers. If it is larger, then the receiver could erroneously accept duplicate segments. </span></li></ul><h3 id='congestion-control-1'><span>Congestion Control</span></h3><h4 id='what-is-congestion'><span>What is Congestion?</span></h4><p><span>If we send too many packets too quickly into the network it becomes congested. Controlling congestion is the combined responsibility of the </span><strong><span>Transport Layer</span></strong><span> and </span><strong><span>Network Layer</span></strong><span>.</span></p><ul><li><span>Congestion occurs at routers, so the Network Layer should signal it, yet Transport Layer controls dispatching of packets.</span></li></ul><h4 id='desirable-bandwidth-allocation'><span>Desirable Bandwidth Allocation</span></h4><ul><li><p><span>What is the optimal state we are aiming for?</span></p><ul><li><span>We should use all available bandwidth</span></li><li><span>We should avoid congestion</span></li><li><span>We should be fair across Transport entities</span></li><li><span>We should respond quickly to changing usage</span></li></ul></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Use all available bandwidth</span></p><ul><li><p><span>Two refinements:</span></p><ul><li><span>Use a little less than all of the </span><strong><span>bandwidth</span></strong><span> due to &#39;bursty&#39; traffic</span></li><li><span>We should worry about &#39;</span><strong><span>goodput</span></strong><span>&#39; not </span><strong><span>throughput</span></strong></li></ul></li></ul><p><span>As we approach our </span><strong><span>bandwidth limits</span></strong><span>, bursts of higher traffic cause losses in network buffers. These losses cause more retransmissions initiating congestion collapse.</span></p><p><span>As the network approaches congestion, delay rises at an </span><strong><span>increasing</span></strong><span> rate (due to buffering). Packets are </span><strong><span>lost</span></strong><span> after the </span><strong><span>maximum</span></strong><span> </span><strong><span>buffering</span></strong><span> </span><strong><span>delay</span></strong><span> is exceeded.</span></p><p>&nbsp;</p><h4 id='min-max-fairness'><span>Min-Max Fairness</span></h4><ul><li><span>Definition: an allocation of bandwidth is </span><strong><span>min-max fair</span></strong><span> if the bandwidth given to one flow cannot be increased without decreasing bandwidth for another flow</span></li><li><span>Fairness is complicated but precise fairness is less important than preventing </span><strong><span>starvation and congestion</span></strong></li></ul><p>&nbsp;</p><h4 id='convergence'><span>Convergence</span></h4><p><span>Connections are not static. They come and go. Any approach to fair allocation must converge quickly to the ideal operating point.</span></p><p><strong><span>Ideal Convergence</span></strong></p><p><img src="img/image-20220521120032610.png" referrerpolicy="no-referrer" alt="image-20220521120032610"></p><h4 id='types-of-congestion'><span>Types of Congestion</span></h4><p><img src="img/image-20220521120105977.png" referrerpolicy="no-referrer" alt="image-20220521120105977"></p><p><span>We have 2 two types of congestion:</span></p><ol start='' ><li><span>We are dealing with a low capacity receiver which cannot follow the stream of data</span></li><li><span>We are dealing with a congested router in-between</span></li></ol><h4 id='managing-send-rate'><span>Managing Send Rate</span></h4><p><span>In the case of a low capacity receiver, we need to resize our flow control buffer - </span><strong><span>Transport Layer Solution</span></strong></p><p><span>In the case of a network congestion, we need to lower our send rate in the Transport layer based upon a signal from the </span><strong><span>Network Layer</span></strong></p><p><strong><span>TCP</span></strong><span> does both!</span></p><p>&nbsp;</p><h4 id='aimd-additive-increase-multiple-decrease'><span>AIMD (Additive Increase, Multiple Decrease)</span></h4><p><span>By increasing in additive fashion, but decreasing by multiples, we converge in saw-tooth fashion around the optimal.</span></p><p><img src="img/image-20220521120913977.png" referrerpolicy="no-referrer" alt="image-20220521120913977"></p><ul><li><span>It&#39;s easy to drive the network into congestion and difficult to recover. So our increase in rate should be gentle and our decrease should be aggressive.</span></li></ul><p><span>Quick recap of things you should know:</span></p><ul><li><strong><span>TCP</span></strong><span> will start by using the slow start algorithm. This means that it will start by sending one packet, should you receive an ACK then you will </span><strong><span>double</span></strong><span> the amount of packets send. This will keep on doubling until you reach the </span><strong><span>threshold</span></strong><span>.</span></li><li><span>If you reach the threshold, TCP will use the the  </span><strong><span>AIMD</span></strong><span> algorithm. This means it will keep on adding an extra packet to the max of the packets it can send out instead of doubling it as long as the </span><strong><span>ACKs</span></strong><span> keep on being received.</span></li><li><span>If the ACK is lost or timed out then that </span><strong><span>Multiple decrease</span></strong><span> will kick in and divide the amount of packets the sender can send at one time in half. Reducing the </span><strong><span>amount</span></strong><span> </span><strong><span>of packets</span></strong><span> on the network by a lot and probably solve the </span><strong><span>congestion</span></strong><span> at the router.</span></li></ul><p>&nbsp;</p><h3 id='user-datagram-protocol-udp'><span>User Datagram Protocol (UDP)</span></h3><ul><li><span>Connectionless protocol</span></li><li><span>Allows for the sending of segments between host with no connection overhead</span></li><li><span>Provides no: flow control, ordering, congestion control</span></li><li><span>Does provide: ports and checksum</span></li></ul><h4 id='structure'><span>Structure</span></h4><p><img src="img/image-20220521132740218.png" referrerpolicy="no-referrer" alt="image-20220521132740218"></p><ul><li><span>UDP gives us </span><strong><span>TSAP addresses</span></strong><span> and a simple checksum service for end-to-end error checking.</span></li></ul><h4 id='checksum-1'><span>Checksum</span></h4><p><img src="img/image-20220521133416007.png" referrerpolicy="no-referrer" alt="image-20220521133416007"></p><ul><li><span>The UDP checksum is calculated based upon a simple hash of the UDP header and the IP pseudo-header.</span></li></ul><h4 id='benefits'><span>Benefits</span></h4><ol start='' ><li><span>Connectionless, so works well with </span><strong><span>anycast (e.g. DNS)</span></strong><span>, </span><strong><span>broadcast(e.g. DHCP, Wake on LAN)</span></strong><span> and multicast.</span></li><li><span>Low overhead in comparison to TCP, so it can be implemented on </span><strong><span>tiny devices</span></strong></li></ol><p>&nbsp;</p><h3 id='real-time-protocol-rtp'><span>Real Time Protocol (RTP)</span></h3><ul><li><span>Multimedia applications tend to need the same kinds of services.</span></li><li><span>Real-time Transport Protocol (RTP) is common approach to addressing these concerns</span></li></ul><p><span> Real time data consists of several related data stream: meta-data, video, audio, These must be sychronized.</span></p><p>&nbsp;</p><h4 id='rtp-in-the-stack'><span>RTP in the stack</span></h4><p><img src="img/image-20220521134617585.png" referrerpolicy="no-referrer" alt="image-20220521134617585"></p><h4 id='how-does-it-work'><span>How does it work?</span></h4><ul><li><span>The sending RTP library takes in multimedia stream (audio, text, video) and multiplexes them.</span></li><li><span>Data is encoded in </span><strong><span>RTP</span></strong><span> packets and transmitted over </span><strong><span>UDP</span></strong><span>.</span></li><li><span>Receiving RTP library receives, decodes and plays multimedia</span></li></ul><h4 id='why-use-udp-for-rtp'><span>Why use UDP for RTP</span></h4><p><span>We don&#39;t need every bit of data of a stream, our eyes most of the time can&#39;t see the missing frames in a video. We can also interpolate (i.e guess at the contents based upon the previous and following frames.)</span></p><p><span>Multicast is a critical tool for efficient media distribution.</span></p><h4 id='features'><span>Features</span></h4><ul><li><span>We still need to know if packets went missing, but the action we take could be different: </span><strong><span>interpolate</span></strong><span>, </span><strong><span>ignore</span></strong><span>, etc.</span></li><li><span>RTP packets carry linearly increasing sequence number 1 higher than its predecessor. </span></li><li><span>RTP also supports extension headers for more advanced functionality.</span></li></ul><p>&nbsp;</p><h3 id='real-time-control-protocol-rtcp'><span>Real Time Control Protocol (RTCP)</span></h3><ul><li><span>Real Time Control Protocol (RTCP) controls RTP streams.</span></li><li><span>Providing feedback and control on delay, variation in delay, jitter, bandwidth and congestion</span></li><li><span>Provides synchronization of streams.</span></li></ul><p>&nbsp;</p><h4 id='jitter'><span>Jitter</span></h4><p><span>Packets take a variable amount of time to travel between hosts. This causes out of order arrival and thus results in variable delay between sender and receiver. This variability in delay is knows as </span><strong><span>jitter</span></strong><span>. </span></p><p><img src="img/image-20220521162204041.png" referrerpolicy="no-referrer" alt="image-20220521162204041"></p><p><img src="img/image-20220521162503413.png" referrerpolicy="no-referrer" alt="image-20220521162503413"></p><h4 id='modifying-playback-point'><span>Modifying Playback Point</span></h4><ul><li><span>The playback point determines how long to wait at the receiver before playing incoming RTP packets</span></li><li><span>We must select it correctly, or end up with either (a.) unnecessary delay or (b.) high loss.</span></li></ul><p>&nbsp;</p><p>&nbsp;</p><h3 id='transmission-control-protocol-tcp'><span>Transmission Control Protocol (TCP)</span></h3><ul><li><span>TCP provides a reliable end-to-end byte-stream over an unreliable internetwork</span></li><li><span>More than 90% of Internet traffic is TCP</span></li></ul><p>&nbsp;</p><p><strong><span>The TCP Transport Entity</span></strong></p><ul><li><p><span>The Transport Entity is the software process that </span><strong><span>implements</span></strong><span> the </span><strong><span>TCP</span></strong><span> protocol.</span></p></li><li><p><span>The transport entity is responsible for:</span></p><ul><li><span>Splitting byte streams into segments</span></li><li><span>Reliable transmission</span></li><li><span>Reconstructing byte streams</span></li><li><span>Efficiently using bandwidth and avoiding congestion</span></li></ul></li></ul><p><strong><span>Addressing by Ports</span></strong></p><ul><li><span>TCP implements TSAP using ports</span></li><li><span>Ports below 1024 are reserved for well known applications</span></li></ul><p>&nbsp;</p><p><strong><span>TCP Connections</span></strong></p><ul><li><p><span>TCP connections are full duplex, support simultaneous bi-directional communication</span></p></li><li><p><span>TCP connections map to exactly two sockets</span></p></li><li><p><span>The writing of data to TCP element is decoupled from reading of that data</span></p><ul><li><span>Imagine you write four 512KB blocks. They may be divided into eight 256KB blocks or two 1024KB blocks. The transport entity is responsible. </span></li></ul></li></ul><p>&nbsp;</p><p><strong><span>Sequence Numbers and Segmentation</span></strong></p><ul><li><p><span>Every byet has it own 32-bit sequence number.</span></p></li><li><p><span>TCP packets have limited size:</span></p><ul><li><span>Header limits packet size to </span><strong><span>64K</span></strong></li></ul></li></ul><h4 id='the-tcp-header'><span>The TCP Header</span></h4><p><img src="img/image-20220521165052584.png" referrerpolicy="no-referrer" alt="image-20220521165052584"></p><p>&nbsp;</p><h5 id='source-and-destination-ports'><span>Source and Destination Ports</span></h5><ul><li><span>Source port = </span><strong><span>TSAP</span></strong><span> address from which segment was sent</span></li><li><span>Destination port = </span><strong><span>TSAP</span></strong><span> address to which the segment is sent</span></li><li><strong><span>Note</span></strong><span>: a connection is implicitly identified by source TSAP + source NASP + dest. TSAP + dest NSAP + procotol</span></li></ul><h5 id='tcp-header-length'><span>TCP Header Length</span></h5><ul><li><span>TCP headers are variable length due to the use of </span><strong><span>option fields</span></strong></li></ul><p>&nbsp;</p><h5 id='one-bit-flags'><span>One-Bit Flags</span></h5><p><img src="img/image-20220521165740692.png" referrerpolicy="no-referrer" alt="image-20220521165740692"></p><p><img src="img/image-20220521170024890.png" referrerpolicy="no-referrer" alt="image-20220521170024890"></p><p>&nbsp;</p><h5 id='window-size-2'><span>Window size</span></h5><p><img src="img/image-20220521170056379.png" referrerpolicy="no-referrer" alt="image-20220521170056379"></p><ul><li><span>TCP implements a variable-sized sliding window</span></li><li><span>Specifies how many bytes may be sent starting at the byte acknowledged</span></li><li><span>Window size of 0 indicates that bytes up to ACK number have been received, but the receiver requires time to process them.</span></li></ul><p>&nbsp;</p><h5 id='checksum-2'><span>Checksum</span></h5><ul><li><span>Identical to UDP, calculated from the TCP header and the IP pseudo-header. </span><strong><span>Compulsory</span></strong></li></ul><p><strong><span>Urgent pointer</span></strong></p><ul><li><span>if urgent flag is set, this pointer gives the byte offset where urgent data is located.</span></li></ul><h5 id='options'><span>Options</span></h5><ul><li><span>Just a place for optional headers.</span></li></ul><h5 id='data'><span>Data</span></h5><ul><li><p><span>The remainder of our packet is used for data. </span></p><ul><li><span>Max payload = 65535 – IP Header – TCP Header. </span></li><li><span>Max payload = 65535 – 20 – 20 = 65495. </span></li></ul></li></ul><p><span>THIS IS OPTIONAL</span></p><p>&nbsp;</p><h4 id='3-way-handshake'><span>3-Way Handshake</span></h4><ul><li><span>Connections are established and released using the 3-way handshake</span></li><li><span>One or both sides passively listen for incoming connections </span><strong><span>SYN(SEQ=X).</span></strong></li><li><span>If no application handler, they respond with </span><strong><span>RST</span></strong></li><li><span>If they are willing to accept, they respond with </span><strong><span>SYN(SEQ=Y,ACK=X+1)</span></strong><span>.</span></li><li><span>If not willing to accept, no ACK is sent.</span></li></ul><p><img src="img/image-20220521171459213.png" referrerpolicy="no-referrer" alt="image-20220521171459213"></p><ul><li><p><span>Disconnecting is best thought of as operating on two simplex connections.</span></p><ul><li><span>Either party sends a FIN segment.</span></li><li><span>When FIN is ACK&#39;d, connection is shut down for new data. It may still flow in other direction.</span></li></ul></li><li><p><span>To avoid the </span><strong><span>two-generals problem</span></strong><span>, timers start on FIN transmission (twice packet lifetime) and connections are closed after this time.</span></p></li></ul><h4 id='tcp-as-a-state-machine'><span>TCP as a State Machine</span></h4><ul><li><span>TCP can be represented as a state machine with </span><strong><span>11 states</span></strong></li><li><span>In each state, legal events cause a transition to a new state.</span></li></ul><p>&nbsp;</p><p><img src="img/image-20220521171906775.png" referrerpolicy="no-referrer" alt="image-20220521171906775"></p><h4 id='receiver-control-of-transmission'><span>Receiver Control of Transmission</span></h4><p><span>When receiver window is 0, no transmission can occur with two exceptions</span></p><ol start='' ><li><strong><span>Urgent traffic</span></strong></li><li><strong><span>Window probe</span></strong></li></ol><p>&nbsp;</p><h4 id='tinygram-syndrome'><span>Tinygram Syndrome</span></h4><p><span>This is basically, TCP can be such a waste of resources because it&#39;s possible we send several segments with headers and such for just one byte of data.</span></p><p><img src="img/image-20220521204738436.png" referrerpolicy="no-referrer" alt="image-20220521204738436"></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Solution: Delayed acknowledgements are a simple approach to addressing Tinygram Syndrome</span></p><ul><li><p><span>Until timeout, wait for data to be transmitted. </span></p><ul><li><span>If data is transmitted before time-out, piggyback acknowledgement in data. </span></li><li><span>If timeout occurs, send acknowledgement</span></li></ul></li></ul><p>&nbsp;</p><h4 id='nagles-algorithm'><span>Nagle&#39;s Algorithm</span></h4><p><span>Nagle&#39;s algorithm, while there is a sent segment with no ACK, buffer output until we have a full segment, then send at once.</span></p><p><span>This would not work well for real time systems, computer games,...</span></p><p>&nbsp;</p><h4 id='silly-window-syndrome'><span>Silly Window Syndrome</span></h4><p><span>Silly Window Syndrome occurs when the sending entity receives data in large blocks however the receiving application only reads data 1-byte at a time.</span></p><p><img src="img/image-20220521210206712.png" referrerpolicy="no-referrer" alt="image-20220521210206712"></p><h4 id='clarkes-algorithm'><span>Clarke&#39;s Algorithm</span></h4><p><span>Delay window updates until the window can receive the maximum segment size, or until the buffer is half empty.</span></p><p>&nbsp;</p><h4 id='retransmission-time-out'><span>Retransmission Time Out</span></h4><ul><li><p><span>Retransmission Time Out (RTO) in TCP determines how long to wait for an ACK before retransmitting a segment.</span></p><ul><li><span>If an ACK is not received, we retransmit and restart the timer.</span></li></ul></li><li><p><span>How to select an RTO period:</span></p><ul><li><span>What happens if it is too long?</span></li><li><span>What happens if it is too short?</span></li></ul></li><li><p><span>TCP </span><strong><span>dynamically adapts</span></strong><span> the RTO period</span></p></li></ul><p>&nbsp;</p><h4 id='estimating-round-trip-time'><span>Estimating Round Trip Time</span></h4><p><span>For each connection maintain Smoothed Round Trip Time (SRTT), the best estimate for current round-trip time.</span></p><p>&nbsp;</p><h4 id='estimating-variance-in-delay'><span>Estimating Variance in Delay</span></h4><p><span>The first approaches to setting RTO used a fixed multiplier of RTT, but this has a problem: </span></p><ul><li><span>Recall that when load approaches capacity, delay becomes large and highly variable.</span></li></ul><h4 id='putting-it-all-together'><span>Putting it All Together</span></h4><p><span>We combine our measurement of RTT and RTTVAR in a simple weighted sum to calculate RTO</span></p><p><img src="img/image-20220521211355082.png" referrerpolicy="no-referrer" alt="image-20220521211355082"></p><p>&nbsp;</p><h4 id='the-persistence-timer'><span>The &#39;Persistence&#39; Timer</span></h4><ul><li><p><span>This timer is used to determine when to send window probes</span></p><ul><li><span>The timer starts when a window of size 0 is reported</span></li><li><span>If a non-zero window size update is received, the persistence time is cancelled.</span></li><li><span>If the timer expires, a window probe is issued.</span></li></ul></li></ul><h4 id='the-keep-alive-timer'><span>The &#39;Keep Alive&#39; Timer</span></h4><ul><li><span>The Keep Alive Timer is restarted whenever a message is received from a remote host.</span></li><li><span>If the timer expires, the remote host is probed to ensure that it has not crashed.</span></li><li><span>If no response is received, the connection is terminated</span></li><li><span>This is optional</span></li></ul><p>&nbsp;</p><h4 id='congestion-control-2'><span>Congestion Control</span></h4><p><span>Congestion Control is a key feature of TCP</span></p><p><span>The network layer detects congestion and takes action (e.g. dropping packets).</span></p><ul><li><span>Congestion notification is explicit or implicit</span></li><li><span>Notifications may be precise or imprecise.</span></li></ul><p><span>TCP packet loss is not explicit or precise</span></p><h4 id='tcp-and-aimd'><span>TCP and AIMD</span></h4><ul><li><span>The same as was previously explained.</span></li></ul><p>&nbsp;</p><h4 id='the-congestion-window'><span>The Congestion Window</span></h4><p><span>Congestion Window defines the bytes a sender may have in transmission at any time.</span></p><p><strong><span>Note</span></strong><span>: the congestion window is maintained separately to the flow control window.</span></p><p><span>We now have </span><strong><span>two windows</span></strong><span> that limit how fast we can transmit packets into the network. </span></p><ol start='' ><li><span>The flow control window matches </span><strong><span>host capacity</span></strong><span>. </span></li><li><span>The congestion window matches network capacity</span></li></ol><p><span>TCP uses </span><strong><span>whichever window size is smaller</span></strong><span> at any given time. This ensures that neither hosts nor routers are overwhelmed.</span></p><p>&nbsp;</p><h4 id='packet-loss-as-congestion-signal'><span>Packet loss as Congestion Signal</span></h4><p><span>Is packet loss is a good signal of congestion? </span></p><ul><li><span>Wired routers will always drop packets when congested and seldom otherwise. </span></li><li><span>Wireless devices may drop packets unpredictably, so here it is a poor signal (more later).</span></li></ul><p>&nbsp;</p><p><span>If we base our congestion control on loss, we need a good retransmission timer.</span></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Even if we can infer congestion from loss, we cannot send packets into the network in large bursts.</span></p><p><img src="img/image-20220521213658699.png" referrerpolicy="no-referrer" alt="image-20220521213658699"></p><p><span>We must match the timing of segment transmission to match the speed at which they are transmitted across the slowest link. Otherwise our bursty traffic periodically blocks these low-bandwidth links. We can discover this rate by sending a small bursts of traffic.</span></p><p><img src="img/image-20220521213849946.png" referrerpolicy="no-referrer" alt="image-20220521213849946"></p><p><span>We inject new traffic into the network only as fast as we can receive ACKs. This smoothes out our traffic flow and eliminates bursts that could cause congestion. Thus we avoid overwhelming slow links with bursts of traffic.</span></p><p>&nbsp;</p><h4 id='a-short-coming-of-aimd'><span>A Short coming of AIMD</span></h4><p><span>The additive increase of AIMD can be slow for high capacity connections, so first we use the TCP &#39;slow start&#39; algorithm as mentioned earlier.</span></p><p><img src="img/image-20220521214138003.png" referrerpolicy="no-referrer" alt="image-20220521214138003"></p><p><span>If we keep up Slow Start without stopping, congestion will occur soon so we need a threshold to keep slow-start in check. What would be a good initial value for the threshold? Flow Control Window Size. When the threshold is breached, it is re-set to half of the congestion window. TCP then switches to additive increase until packet loss occurs, when slow start re-starts.</span></p><p><img src="img/image-20220521214415269.png" referrerpolicy="no-referrer" alt="image-20220521214415269"></p><h4 id='fast-recovery'><span>Fast recovery</span></h4><p><span>So instead of completely restarting the amount of packets we&#39;re sending, We wait until the number of packets in the network falls to the new threshold (about 1/2 RTT). Once we have fallen below the thresh, we begin AIMD again.</span></p><p><img src="img/image-20220521214851803.png" referrerpolicy="no-referrer" alt="image-20220521214851803"></p><p><strong><span>Note:</span></strong><span> We can only recover from one packet loss.</span></p><h4 id='selective-ack'><span>Selective ACK</span></h4><p><span>Selective Acknowledgements (</span><strong><span>SACK</span></strong><span>) allows fast recovery after multiple loss, this is achieved by providing extra information within acknowledgements. SACKs allow a </span><strong><span>receiver</span></strong><span> to acknowledge </span><strong><span>non-consecutive</span></strong><span> data, so that the sender can </span><strong><span>retransmit</span></strong><span> only what is </span><strong><span>missing</span></strong><span> at the receivers end. This is particularly helpful on paths with a large bandwidth-delay product.</span></p><p><strong><span>Note</span></strong><span>: SACK is now widely deployed.</span></p><p>&nbsp;</p><h4 id='explicit-congestion-notification-ecn-1'><span>Explicit Congestion Notification (ECN)</span></h4><p><span>ECN allows end-to-end notification of </span><a href='https://en.wikipedia.org/wiki/Network_congestion'><span>network congestion</span></a><span> without dropping packets. Both the sending and receiving host must support ECN. </span></p><ul><li><span>A </span><strong><span>flag</span></strong><span> in the IP header specifies if the encapsulated TCP segment uses </span><strong><span>ECN</span></strong></li><li><span>When congestion is approaching, routers will set the ECN congestion flag in transit.</span></li></ul><p><span>Unfortunately not very widely deployed.</span></p><p>&nbsp;</p><h2 id='chapter-3-the-network-layer'><span>Chapter 3 The Network Layer</span></h2><h4 id='terminology'><strong><span>Terminology</span></strong></h4><ul><li><span>Autonomous Systems (AS): operated by different organizations – a collection of prefixes identified by a 32-bit ASN.</span></li><li><span>Intra-domain routing: within an AS, using an interior gateway protocol</span></li><li><span>Inter-domain: between AS, using an exterior gateway protocol.</span></li><li><span>Internet eXchange Points (IXPs) connect autonomous systems.</span></li></ul><h3 id='role-of-the-network-layer'><span>Role of the Network Layer</span></h3><p><span>The network layer is the lowest layer concerned with end-to-end delivery.</span></p><p><span>End-to-end transmission requires many individual hops: </span></p><ul><li><span>Network offers alternative routes </span></li><li><span>select to minimize overloading and idle routers.</span></li></ul><p><span>The Transport Layer should be shielded from this complexity</span></p><p>&nbsp;</p><h4 id='store-and-forward-packet-switching'><span>Store and Forward Packet Switching</span></h4><p><span>Very basic</span></p><p><span>Routers store a packet until it is fully transmitted and verified by checksum. It is then relayed to the next router on the path to the destination.</span></p><p>&nbsp;</p><h4 id='services-to-transport-layer'><span>Services to Transport Layer</span></h4><p><span>Common goals:</span></p><ul><li><span>Service should be independent of router technolgoies</span></li><li><span>Transport Layer should be shielded from number, type and topology of routers</span></li><li><span>A uniform addressing scheme should be exposed to the Transport Layer</span></li></ul><p>&nbsp;</p><p><strong><span>Connectionless Protocols:</span></strong></p><ul><li><span>Argues that the network is inherently unreliable</span></li><li><span>Transport Layer handles reliability, no ordering, error-detection or correction.</span></li></ul><p><strong><span>Connection-oriented Protocols:</span></strong></p><ul><li><span>Argues that end-to-end </span><strong><span>QoS (Quality of service)</span></strong><span> is needed at Layer 3</span></li><li><span>Network Layer provides specific quality of service support for transport-layer flows</span></li></ul><p>&nbsp;</p><h3 id='connectionless'><span>Connectionless</span></h3><h4 id='principles-3'><span>Principles</span></h4><ul><li><p><span>Packets are injected into the network individually:</span></p><ul><li><span>Each packet is routed independently</span></li><li><span>No connection setup is necessary</span></li><li><span>Each packet carries the end address</span></li></ul></li><li><p><span>We refer to units of transmission at the Network layer as &#39;Datagrams&#39;.</span></p></li></ul><h4 id='example-1'><strong><span>Example</span></strong></h4><p><img src="img/image-20220522122652398.png" referrerpolicy="no-referrer" alt="image-20220522122652398"></p><p><img src="img/image-20220522122924503.png" referrerpolicy="no-referrer" alt="image-20220522122924503"></p><p><span>Packets 1,2 and 3 are routed from H1 to H2 via {A,C,E,F}. Packet 4 is routed via {A,B,D,E,F}</span></p><p><strong><span>IP</span></strong><span> is the best example of a connectionless Network Layer protocol</span></p><p>&nbsp;</p><h3 id='connection-oriented'><span>Connection-oriented</span></h3><h4 id='principles-4'><span>Principles</span></h4><p><span>Based upon &quot;Virtual Circuits&quot;:</span></p><ul><li><span>Circuits are calculated at connection setup.</span></li><li><span>Packets follow the same circuit</span></li><li><span>Circuits terminate along with connections</span></li></ul><p><span>Each packet carries its circuit identifier rather than its end address</span></p><h4 id='example-2'><span>Example</span></h4><p><img src="img/image-20220522123422771.png" referrerpolicy="no-referrer" alt="image-20220522123422771"></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> </span><strong><span>Label Switching</span></strong></p><p><strong><span>MPLS</span></strong><span> is a good example of a connection-oriented protocol used on the Internet.</span></p><p>&nbsp;</p><h3 id='connection-oriented-vs-connectionless'><span>Connection-oriented vs Connectionless</span></h3><p><img src="img/image-20220522123654123.png" referrerpolicy="no-referrer" alt="image-20220522123654123"></p><p>&nbsp;</p><h3 id='routing-algorithms'><span>Routing Algorithms</span></h3><p><span>Routing Algorithms choose routes through the network, determining how a packet should be forwarded. In Virtual Circuit approaches this occurs once, is an ongoing process in Datagram networks.</span></p><h4 id='desirable-properties'><span>Desirable Properties</span></h4><ul><li><strong><span>Correctness</span></strong><span>: algorithm finds routes to all destinations.</span></li><li><strong><span>Simplicity</span></strong><span>: algorithm executes quickly enough for Internet-scale routing.</span></li><li><strong><span>Robustness</span></strong><span>: must be resilient to lower-level hardware and software faults.</span></li><li><strong><span>Stability</span></strong><span>: should converge towards a common set of optimal paths</span></li><li><strong><span>Fairness</span></strong><span>: all parties using the network for communication should receive a &#39;fair&#39; bandwidth allocation</span></li><li><strong><span>Efficiency</span></strong><span>: The routing algorithm should optimally exploit network resources.</span></li></ul><h4 id='2-kinds-of-algorithms'><span>2 Kinds of Algorithms</span></h4><ul><li><strong><span>Non-adaptive Algorithms</span></strong><span>: Do not consider current network topology or traffic</span></li><li><strong><span>Adaptive Algorithms</span></strong><span>: Change their routing decision to reflect changing topology and current traffic conditions.</span></li></ul><p>&nbsp;</p><h4 id='the-sink-tree'><span>The Sink Tree</span></h4><p><span>The set of optimal routes from all sources to destination (D) form a sink tree routed at (D). Routing algorithms aim to discover and use the sink tree for all routers.</span></p><p><img src="img/image-20220522154903016.png" referrerpolicy="no-referrer" alt="image-20220522154903016"></p><p>&nbsp;</p><h4 id='shortest-path-definitions'><span>Shortest Path Definitions</span></h4><p><span>Two common definitions:</span></p><ul><li><strong><span>Fewest Hop:</span></strong><span> minimize the number of hops traveled between all pairs.</span></li><li><strong><span>Lowest Cost:</span></strong><span> minimize other cost factors on each path (distance, delay)</span></li></ul><p>&nbsp;</p><h4 id='dijkstras-algorithm'><span>Dijkstra&#39;s Algorithm</span></h4><p><span>Not gonna explain this one, should know it by now</span></p><p>&nbsp;</p><h4 id='bellman-ford-algorithm'><span>Bellman-Ford Algorithm</span></h4><ul><li><p><span>Used in ARPANET and in the Internet as RIP</span></p></li><li><p><span>Each router measures distance to each neighbor which is measured using special ECHO datagrams.</span></p></li><li><p><span>Each router periodically exchanges its routing tables with all neighbors</span></p></li><li><p><span>Upon receiving routing tables, current tables are discarded and new entries are created for each router based upon:</span></p><ul><li><span>The lowest distance estimate received</span></li><li><span>The distance to the router providing that estimate</span></li></ul></li></ul><h5 id='example-3'><span>Example</span></h5><p><img src="img/image-20220522163149388.png" referrerpolicy="no-referrer" alt="image-20220522163149388"></p><p><img src="img/image-20220522163210821.png" referrerpolicy="no-referrer" alt="image-20220522163210821"></p><p><span>The yellow table is made by using the previous table and the information given in the question.</span></p><h5 id='count-to-infinity-problem'><span>Count to Infinity problem</span></h5><ul><li><span>Bellman-Ford uses only local knowledge. </span><strong><span>Good news travel fast:</span></strong><img src="img/image-20220522163553832.png" referrerpolicy="no-referrer" alt="image-20220522163553832"></li><li><span>Imagine A is down. B-E have distances for A of infinity. A then comes online. After 4 exchanges, everyone has the new path to A.</span></li></ul><p>&nbsp;</p><ul><li><p><strong><span>Bad new travels slowly</span></strong><span>. What if A goes down?</span></p><p><img src="img/image-20220522163743863.png" referrerpolicy="no-referrer" alt="image-20220522163743863"></p></li></ul><p><img src="img/image-20220522163941251.png" referrerpolicy="no-referrer" alt="image-20220522163941251"></p><ul><li><strong><span>Note:</span></strong><span> path length can only increase by 1 each round</span></li><li><strong><span>Core problem</span></strong><span> no router is aware if </span><strong><span>itself</span></strong><span> is included in a path</span></li></ul><p>&nbsp;</p><h4 id='link-state-routing'><span>Link State Routing</span></h4><p><span>TODO</span></p><p>&nbsp;</p><p>&nbsp;</p><h4 id='hierarchical-routing'><span>Hierarchical Routing</span></h4><h5 id='principles-5'><span>Principles</span></h5><ul><li><p><span>Larger routing tables consume more resources</span></p></li><li><p><span>At Internet scales it is not feasible for every router to have an entry for every other.</span></p></li><li><p><span>The Hierarchy Solution:</span></p><ul><li><span>Each router is assigned a region, it knows the internal structure of its own region</span></li><li><span>but only the entry point for remote regions</span></li></ul></li></ul><h5 id='example-4'><span>Example</span></h5><p><img src="img/image-20220523193515208.png" referrerpolicy="no-referrer" alt="image-20220523193515208"></p><p><strong><span>TODO</span></strong></p><p>&nbsp;</p><p>&nbsp;</p><h3 id='delivery-models'><span>Delivery Models</span></h3><ul><li><p><strong><span>Unicast</span></strong><span>: from a single address to a single address (common case considered previously)</span></p></li><li><p><strong><span>Multicast</span></strong><span>: one device on the network to many, but not all, devices on the network</span></p></li><li><p><strong><span>Broadcast</span></strong><span>: from one device on the network to all devices on the network</span></p></li><li><p><strong><span>Unicast</span></strong><span>: all messages from the sender to every receiver.</span></p><ul><li><span>Very wasteful of bandwidth as routers often see the same packet twice.</span></li><li><span>Requires the sender to know the addresses of all end-points</span></li></ul><p>&nbsp;</p></li></ul><h4 id='multi-destination-broadcast-routing'><span>Multi-destination Broadcast Routing</span></h4><ul><li><span>Send a single message that contains a list of all destinations</span></li><li><span>Each router checks the list of destinations and determines the output lines needed, generating a new copy on each line based on its routing tables.</span></li><li><span>Lost of works for the routers</span></li><li><span>Requires the sender to know the addresses of end-points</span></li></ul><p>&nbsp;</p><h4 id='flooding-broadcast'><span>Flooding Broadcast</span></h4><ul><li><span>Send a single message that should be re-transmitted by all routers</span></li><li><span>Message contains a </span><strong><span>Time-to-Live(TTL)</span></strong><span> which is decremented at each host and a </span><strong><span>sequence number ID</span></strong><span>.</span></li><li><span>Hosts forward all incoming messages on all links except the one they arrived one, discarding where TTL=0 or sequence number is in the cache.</span></li><li><span>Still not the most efficient bandwidth use</span></li></ul><p>&nbsp;</p><h4 id='reverse-path-broadcast'><span>Reverse Path Broadcast</span></h4><ul><li><span>Exploits the sink tree seen previously</span></li><li><span>If a router receives a datagram on the link used to route to the send, it probably followed the shortest path and is first to arrive.</span></li><li><span>• If the datagram arrives on any other link, discard it as a duplicate</span></li></ul><p><img src="img/image-20220523195320768.png" referrerpolicy="no-referrer" alt="image-20220523195320768"></p><p><img src="img/image-20220523195332849.png" referrerpolicy="no-referrer" alt="image-20220523195332849"></p><p><img src="img/image-20220523195344321.png" referrerpolicy="no-referrer" alt="image-20220523195344321"></p><p>&nbsp;</p><h4 id='spanning-tree-broadcast'><span>Spanning Tree Broadcast</span></h4><ul><li><span>A spanning tree is a subset of the network that includes all routers and no loops, as with the sink tree.</span></li><li><span>Each router knows if it is in the spanning tree and will forward the packet on all spanning tree lines except the one it arrived on.</span></li><li><span>Generates the minimum possible number of packets but is only possible where router have global knowledge, e.g. not possible with Distance Vector Routing approaches.</span></li></ul><p>&nbsp;</p><h3 id='open-shortest-path-first-ospf'><span>Open Shortest Path First (OSPF)</span></h3><p><span>extension to Link State Routing</span></p><ol start='' ><li><span>Discover its neighbours network addresses. </span></li><li><span>Set the distance to all neighbors. </span></li><li><span>Construct a packet with all learned. </span></li><li><span>Send this packet to all other routers.</span></li><li><span>Compute shortest path to all other routers using Dijkstra’s Algorithm</span></li></ol><p><img src="img/image-20220524101041891.png" referrerpolicy="no-referrer" alt="image-20220524101041891"></p><p><strong><span>Note</span></strong><span>: every link is represented twice, once for each direction as costs may be asymmetric</span></p><h4 id='load-balancing'><span>Load Balancing</span></h4><ul><li><p><strong><span>Equal Cost MultiPath (ECMP)</span></strong><span> routing:</span></p><ul><li><span>Remembers sets of all equal length paths</span></li><li><span>Splits packets across them</span></li></ul></li><li><p><span>This allows for a simple kind of load balancing</span></p></li></ul><p>&nbsp;</p><h4 id='ospf-packets'><span>OSPF Packets</span></h4><p><img src="img/image-20220524101811873.png" referrerpolicy="no-referrer" alt="image-20220524101811873"></p><ul><li><span>All OSPF messages are sent as standard IP packets.</span></li></ul><p>&nbsp;</p><h3 id='border-gateway-protocol-bgp'><strong><span>Border Gateway Protocol (BGP)</span></strong></h3><ul><li><p><span>Border Gateway Protocol focuses on supporting flexible routing policies</span></p></li><li><p><span>AS care about more than shortest path</span></p><ul><li><span>Do not carry commercial traffic on EDU network.</span></li><li><span>Never send Pentagon traffic through China.</span></li><li><span>Do not use AT&amp;T due to bad performance.</span></li></ul></li></ul><h4 id='operation-of-bgp'><span>Operation of BGP</span></h4><ul><li><span>BGP is a form of distance vector protocol. However, it operates on paths not routers</span></li><li><span>A path consists of the destination, the first hop router and then the sequence of AS</span></li><li><span>Internal details of AS are obfuscated. They may use different routing protocols.</span></li></ul><p>&nbsp;</p><h4 id='internal-bgp'><span>Internal BGP</span></h4><ul><li><span>BGP routes are </span><strong><span>not</span></strong><span> propagated across AS using OSPF or other internal protocols</span></li><li><span>Internal BGP (</span><strong><span>IBGP</span></strong><span>) requires boundary routers to learn routes of all other boundary routers</span></li><li><span>Prefixes for external AS are stored at each boundary router and discovered internally using OSPF.</span></li></ul><p><img src="img/image-20220524104827243.png" referrerpolicy="no-referrer" alt="image-20220524104827243"></p><p>&nbsp;</p><h3 id='mobile-connectivity'><span>Mobile Connectivity</span></h3><ul><li><p><span>The problem of keeping mobile hosts connected as they change location:</span></p><ul><li><span>Truly mobile devices, e.g. cell phone</span></li><li><span>Nomadic devices, e.g. laptop computer</span></li></ul></li><li><p><span>We tackle this problem by providing a fixed home address for mobile devices</span></p></li><li><p><span>This is better than re-computing routes, which at large scale ties too many care resources</span></p></li></ul><p>&nbsp;</p><h3 id='client-mobility'><span>Client Mobility</span></h3><ul><li><span>Whenever you got to a new location, DHCP acquires you an address and DNS allows you to reach remote services</span></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> This does not allow remote clients to remain connected to you</span></p><p><span>#### </span></p><h4 id='why-network-level-mobility'><span>Why Network-level Mobility</span></h4><ul><li><span>While application-level mobility is a neat solution, not everything uses domain names.</span></li><li><span>If we want to be a full part of the Internet on a mobile host we need </span><strong><span>network-layer mobility</span></strong></li></ul><h4 id='network-layer-mobility'><span>Network-Layer Mobility</span></h4><ul><li><span>The home agent provides a single consistent address for mobile nodes.</span></li><li><span>When a host acquires a new local address </span><strong><span>(care-of-address)</span></strong><span>, it report this to the home agent.</span></li><li><span>When the home agent receives a datagram for the mobile host it is </span><strong><span>encapsulated</span></strong><span> with a new header and tunnelled to the care-of address</span></li><li><span>Upon receiving a message from it home agent, the mobile host de-encapsulates it and responds directly</span></li><li><span>Subsequent datagrams may be </span><strong><span>tunnelled directly</span></strong><span> between the remote host and the mobile host</span></li><li><span>We refer to this as triangle routing. </span><strong><span>Lets take a look at why..</span></strong></li></ul><p><span> </span><img src="img/image-20220524113211481.png" referrerpolicy="no-referrer" alt="image-20220524113211481"></p><ul><li><p><span>Security if a big problem for this approach:</span></p><ul><li><span>If I can imitate your mobile host, all of your traffic will be directed to me.</span></li></ul></li></ul><p>&nbsp;</p><h3 id='ad-hoc-networks'><span>Ad-Hoc Networks</span></h3><p><span>Ad-hoc networks are infrastructure-less. All nodes are both routers and hosts. This frequently occurs in V</span><strong><span>ehicular Ad-hoc Networks (VANETs)</span></strong><span> and </span><strong><span>multi-hop Internet of Things Networks (IoT)</span></strong></p><p><span>All elements of the network may move at any time this static reasoning over topology is meaningless</span></p><h4 id='iot-concerns'><span>IoT Concerns</span></h4><ul><li><strong><span>Resource</span></strong><span> </span><strong><span>constrained</span></strong><span>: tiny memory, tiny storage</span></li><li><strong><span>Energy conservation</span></strong><span>: motes must run on a single charge for long periods</span></li><li><strong><span>Unreliable</span></strong><span>: mote failure due to damage, power failure, etc. is common</span></li></ul><h4 id='ad-hoc-on-demand-vector-routing'><span>Ad-hoc On Demand Vector Routing</span></h4><ul><li><strong><span>Ad-Hoc On Demand Vector Routing (AODV)</span></strong><span> is closely related to distance vector routing.</span></li><li><span>Routes are only discovered when someone wants to send a datagram -&gt; </span><strong><span>better for highly dynamic networks</span></strong></li></ul><h5 id='aodv-route-discovery'><span>AODV: Route discovery</span></h5><ul><li><span>Our network medium is broadcast. Each node has a range</span></li><li><span>Neighbours determined by range + location. We assume an ideal circular range (unlikely)</span></li><li><span>When </span><strong><span>AODV</span></strong><span> is asked to route a message to an unknown destination, it floods </span><strong><span>ROUTE_REQUEST</span></strong><span> message</span></li><li><span>A </span><strong><span>ROUTE_REQUEST</span></strong><span> message contains a SEQ. Number and TTL to control flooding.</span></li><li><span>Discovered node sends </span><strong><span>ROUTE_REPLY</span></strong><span> back along the path of incoming </span><strong><span>ROUTE_REQUEST</span></strong></li><li><span>A hop counter in ROUTE_REPLY is incremented at each intermediate hop and intermediate nodes add the route to their tables</span></li></ul><p><img src="img/image-20220524115019499.png" referrerpolicy="no-referrer" alt="image-20220524115019499"></p><p><span>As route discovery leads to high broadcast overhead. To minimize this… </span><strong><span>ROUTE_REQUESTS</span></strong><span> are initially sent with TTL=1 if this fails after a </span><strong><span>time-out</span></strong><span>, it this is incrementally increased until the route is found. </span></p><p>&nbsp;</p><p>&nbsp;</p><h3 id='internet-control-and-message-protocol-icmp'><span>Internet Control and Message Protocol (ICMP)</span></h3><h4 id='packets'><span>Packets</span></h4><p><img src="img/image-20220524115328153.png" referrerpolicy="no-referrer" alt="image-20220524115328153"></p><h4 id='traceroute'><span>Traceroute</span></h4><p><span>Traceroute provides a map of how data on the internet travels from its source to is destination.</span></p><p>&nbsp;</p><h3 id='address-resolution-protocol-arp'><span>Address Resolution Protocol (ARP)</span></h3><ul><li><span>Recall that we separate logical </span><strong><span>IP addresses</span></strong><span> and physical </span><strong><span>MAC addresses.</span></strong></li><li><span>Physical media routes by MAC address at each hop we need to resolve a IP to MAC addresses</span></li><li><span>ARP maps IP addresses onto MAC addresses</span></li></ul><h4 id='arp-in-action'><span>ARP in Action</span></h4><p><span>Hosts 1 checks it ARP cache for IP address of Host 2, if it has a matching MAC address it sends to this address.</span></p><p><span>If MAC not in cache, Host 1 sends a broadcast message asking who owns the target IP address</span></p><p><span>Hosts2 reponds by sending it MAC address to Host 1. Host 1 may now route to Host 2.</span></p><p><strong><span>Note</span></strong><span>: this is within the same subnet. What entry would you expect for hosts on remote links?</span></p><p><img src="img/image-20220524121550122.png" referrerpolicy="no-referrer" alt="image-20220524121550122"></p><p>&nbsp;</p><h3 id='throttling'><span>Throttling</span></h3><ul><li><p><span>Recall: throttling occurs at the Transport Layer.</span></p><ul><li><span>Implemented using a congestion window in TCP</span></li></ul></li><li><p><span>But it must be initiated by the Network Layer via implicit or explicit signals.</span></p></li><li><p><span>We use three mechanisms: </span><strong><span>Choke packets, Explicit Congestion Notification (ECN)</span></strong><span> flags and </span><strong><span>Random Early Detection (RED)</span></strong></p></li></ul><p>&nbsp;</p><h4 id='estimating-load'><span>Estimating Load</span></h4><p><span>Load can be estimated based upon three metrics:</span></p><ul><li><strong><span>Link utilization</span></strong><span>: rapid feedback, but hard to account for burst traffic.</span></li><li><strong><span>Packet loss:</span></strong><span> accounts for all traffic but usually comes too late</span></li><li><strong><span>Queuing delay</span></strong><span>: rapid feedback including burstiness</span></li></ul><h3 id='choke-packets'><span>Choke Packets</span></h3><p><span>Choke packets are explicit notifications provided by congested routers.</span></p><ul><li><span>A datagram is sent to the sender</span></li><li><span>The packet is marked so that no further choke packets will be generated later on</span></li></ul><p><span>Choke packet causes sending entity to throttle the rate it sends segments into the network</span></p><h3 id='explicit-congestion-notification-ecn-2'><span>Explicit Congestion Notification (ECN)</span></h3><p><span>ECN is used to tag packets as they travel through routers. ECN-tagged packets reach </span><strong><span>destination host</span></strong><span>, which messages the sender to throttle send rate.</span></p><p><span>-&gt; In comparison to Choke Packet, ECN has </span><strong><span>lower overhead</span></strong><span>, but takes </span><strong><span>longer</span></strong><span> to enact </span><strong><span>change</span></strong><span>. </span></p><h3 id='random-early-detection'><span>Random Early Detection</span></h3><p><span>We randomly discard packets as delay is detected.</span></p><p><span>This is counter-intuitive, but has advantages:</span></p><ul><li><span>It makes packet loss a more reliable congestion signal.</span></li><li><span>It reduces the delay between congestion starting and transport-layer throttling.</span></li><li><span>Random Early Detected (RED) will drop random packets as congestion approaches.</span></li></ul><p><strong><span>Question:</span></strong></p><ul><li><p><span>Why is randomly dropping packets a good way to signal fast senders?</span></p><p><span>A: Because fast senders tend to have many more packets in the queue… – …so randomly dropping packets tends to affect them more. – This also reduces book-keeping overhead.</span></p></li></ul><p>&nbsp;</p><p>&nbsp;</p><h2 id='chapter-4-data-link-layer'><span>Chapter 4: Data Link Layer</span></h2><h3 id='mac-layer-principles-medium-access-control'><span>MAC layer principles (Medium Access Control)</span></h3><h4 id='the-channel-allocation-problem'><span>The Channel Allocation Problem</span></h4><ul><li><span>Medium Access Control (MAC) is about sharing a single broadcast channel</span></li><li><span>This may be part of the wireless spectrum, a cable or optical fiber</span></li><li><span>There are two basic options: static allocation and dynamic allocation</span></li></ul><h4 id='static-channel-allocation'><span>Static Channel Allocation</span></h4><ul><li><span>Traditional approach to sharing network media between multiple nodes. </span></li><li><span>For example, FM radio channels are statically allocate to radio stations.</span></li></ul><h4 id='dividing-network-media'><span>Dividing Network Media</span></h4><ul><li><strong><span>Different media</span></strong><span>: n wires from N in a cable</span></li><li><strong><span>Time slicing</span></strong><span>: n time-slots from N in a given time period.</span></li><li><strong><span>Frequency division</span></strong><span>: n channels from N in a given time period</span></li></ul><h4 id='dynamic-assignment-assumptions'><span>Dynamic Assignment Assumptions</span></h4><ol start='' ><li><strong><span>Independent traffic</span></strong><span> - multiple nodes generating constant traffic levels.</span></li><li><strong><span>Single channel or not</span></strong><span> - do all nodes send and receive on the same channel?</span></li><li><strong><span>Observable collisions</span></strong><span> - when two nodes transmit at once, the result is garbage</span></li><li><strong><span>Continuous or slotted</span></strong><span> - are transmissions constrained to periods or free?</span></li><li><strong><span>Carrier sense or not</span></strong><span> - can we tell if the channel is in use before sending?</span></li></ol><p>&nbsp;</p><p>&nbsp;</p><h3 id='case-studies-important-takeaways'><span>Case studies Important TakeAways</span></h3><h4 id='slotted'><span>Slotted</span></h4><p><img src="img/image-20220524203857739.png" referrerpolicy="no-referrer" alt="image-20220524203857739"></p><p><span>As you can see on the image, a lot of times collision happen because hosts are arbitrarily sending frames. If we now use timeframes in which only certain hosts can transmit, we can reduce the amount of collisions and thus performance and can be seen below. </span></p><p><img src="img/image-20220524204118208.png" referrerpolicy="no-referrer" alt="image-20220524204118208"></p><h4 id='carrier-sense-multiple-access-csma'><span>Carrier Sense Multiple Access (CSMA)</span></h4><p><span>In essence, just listen on the network and check if anyone is transmitting. If yes, do nothing. Listening all of the time is known as </span><strong><span>persistent</span></strong><span> CSMA.</span></p><p>&nbsp;</p><h4 id='non-persistent-carrier-sense-multiple-access-csma'><span>non-Persistent Carrier Sense Multiple Access (CSMA)</span></h4><p><span>This type of CSMA does not sample continuously. When a node has data ready, it samples the channel. If the channel is idle it transmits directly. If it is busy, it waits a random period and tries again. If a collision occurs, the node waits a random time and retransmits.</span></p><h4 id='1-persistent-carrier-sense-multiple-access-csma'><span>1-Persistent Carrier Sense Multiple Access (CSMA)</span></h4><p><span>Same thing as before but now we transmit with a probability of 1 when channel is idle.</span></p><p>&nbsp;</p><h4 id='p-persistent-carrier-sense-multiple-access-csma'><span>p-Persistent Carrier Sense Multiple Access (CSMA)</span></h4><p><span>Same thing as before but now we transmit with a probability of p when the channel is idle. If no acknowledgement it retransmits with probability Q = 1-p, and so on until transmit</span></p><p><strong><span>Performance Comparison</span></strong></p><p><img src="img/image-20220524204745107.png" referrerpolicy="no-referrer" alt="image-20220524204745107"></p><p>&nbsp;</p><p>&nbsp;</p><h4 id='hidden-and-exposed-terminals'><span>Hidden and Exposed Terminals</span></h4><p><img src="img/image-20220524204312186.png" referrerpolicy="no-referrer" alt="image-20220524204312186"></p><h4 id='iot-challenges'><span>IoT Challenges</span></h4><p><span>RF Interference and occlusion:</span></p><ul><li><span>Only small chinks of the spectrum may be used without a license and are therefore highly congested</span></li><li><span>Sporadic interference must be anticipated</span></li></ul><p><span>Power constraints:</span></p><ul><li><span>The radio uses more power than any other component, so we must minimize its use (while providing ad-hoc routing)</span></li><li><span>Remember it uses power while transmitting and listening</span></li></ul><p><span>Node Loss:</span></p><ul><li><span>We may lose nodes at any time, monitoring, flood prediction, volcano monitoring.</span></li><li><span>Or just simple dead batteries</span></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span> Solution: Berkeley MAC (BMAC)</span></p><h5 id='berkeley-mac'><span>Berkeley MAC</span></h5><ul><li><p><span>Target requirements:</span></p><ul><li><span>Low-power, simple implementation, configurable, scalable, decentralized.</span></li><li><span>Suitable for diverse applications</span></li></ul></li></ul><p><span>Based upon a simple Carrier Sense Medium Access scheme.</span></p><p><span>As we do not know when our neighbours may transmit, we must listen continuously. How can we reduce the power cost of this?</span></p><p><span>As transmissions are infrequent, it is better to spend a little more energy when transmitting than while listening. This is the idea behind </span><em><span>Low Power Listening</span></em></p><p><span>Nodes only turn on their radios for short sampling periods. If traffic is detected, the radio remains active and listening to receive a packet. As transmissions may occur at any time, we add a long preamble to messages to ensure that the radio detects the incoming message and is active by the time the data arrives.</span></p><p><img src="img/image-20220524210125493.png" referrerpolicy="no-referrer" alt="image-20220524210125493"></p><h4 id='time-synchronized-mesh-protocol'><span>Time Synchronized Mesh Protocol</span></h4><p><span>TSMP is a MAC and Network layer protocol for WSAN.</span></p><p><span>Target requirements: </span></p><ul><li><span>Reliable, low power and secure, self-organizing, self-healing, minimal management. </span></li><li><span>It should ‘just work’.</span></li></ul><p><span>TSMP (Time Synchronized Mesh Protocol) is a networking protocol that forms the foundation of reliable, ultra low-power wireless sensor networking. Wireless sensor networks (WSNs) are self-organizing, multi-hop networks of wireless sensor nodes used to monitor and control physical phenomena. Typical WSN applications include industrial process automation, commercial building climate control and security alarming.</span></p><p><span>TSMP provides redundancy and fail-over in time, frequency and space to ensure very high reliability even in the most challenging radio environments. TSMP also provides the intelligence required for self-organizing, self-healing mesh routing. The result is a network that installs easily with no specialized wireless expertise, automatically adapts to unforeseen challenges, and can be extended as needed without sophisticated planning.</span></p><p><span>There are five key components of TSMP that contribute to end-to-end network reliability, simple installation and power efficiency.</span></p><ul><li><span>Time synchronized communication</span></li><li><span>Frequency hopping</span></li><li><span>Automatic node joining and network formation</span></li><li><span>Fully-redundant mesh routing</span></li><li><span>Secure message transfer</span></li></ul><h3 id='ethernet'><span>Ethernet</span></h3><h4 id='frame-formats'><span>Frame Formats</span></h4><p><img src="img/image-20220524153306155.png" referrerpolicy="no-referrer" alt="image-20220524153306155"></p><h4 id='dix-v-ieee-8023'><span>DIX v IEEE 802.3</span></h4><ul><li><p><span>DIX uses a length field, while 802.3 uses a type field. As can be seen above.</span></p></li><li><p><span>Without the type field you cannot dispatch to higher layers, so an 8 byte logical link control header is added.</span></p></li><li><p><span>Fortunately all of the type fields had values over 1500:</span></p><ul><li><span>Ethernet max frame is 1500</span></li><li><span>&lt;= 1500 denotes size. &gt; 1500 denotes type</span></li></ul></li></ul><h4 id='min--max-frame-length'><span>Min. / Max. Frame Length</span></h4><p><span>Transceiver must have enough RAM for MAX frame size. RAM was expensive, so 1500 bytes was selected.</span></p><p><span>Why a minimum frame size?</span></p><ul><li><span>A minimum frame size of 64bytes makes it easy to distinguish valid packets from failed chunks</span></li><li><span>On collision, Ethernet generates a 48 bit noise burst to warn other stations</span></li><li><span>On a long cable, a small packet may be transmitted before collision is detected.</span></li></ul><p><img src="img/image-20220524161159153.png" referrerpolicy="no-referrer" alt="image-20220524161159153"></p><h4 id='ethernet-applies-1-p-csma-cd-carrier-sense-medium-access-with-collision-avoidance'><span>Ethernet applies 1-p CSMA-CD (Carrier Sense Medium Access with Collision avoidance)</span></h4><ul><li><p><span>Ethernet uses 1-persistant CSMA-CD:</span></p><ul><li><span>Sample channel continuously</span></li><li><span>If busy, wait until idle and transmit with probability 1</span></li><li><span>If a collision occurs wait a random time and retransmit</span></li></ul></li><li><p><span>Ethernet uses binary exponential back-off rather than waiting a random time.</span></p></li></ul><h5 id='exponential-back-off'><span>Exponential Back-off</span></h5><p><span>Back-off is slotted. After collision, each station waits a random number chosen in the range 0 to 2</span><sup><span>i</span></sup><span>-1, where i is the number of collisions. We try: 0-1, 0-3, 0-7</span></p><p><span>Range is upper bounded to 1023 slots: after 16 collisions higher layers are signaled.</span></p><p><span>Algorithm ensures lowest delay when collisions are rare and adapt to increasing collisions.</span></p><h4 id='security-issues'><span>Security Issues</span></h4><p><span>With persistent channel sampling, an Ethernet interface sees frame for all hosts on its link. Normally these frames would be thrown away. But the host is free to keep them and analyse them.</span></p><h4 id='from-a-single-cable-to-hubs'><span>From a single Cable to Hubs</span></h4><p><span>#### </span></p><h4 id='-2'><img src="img/image-20220524162436380.png" referrerpolicy="no-referrer" alt="image-20220524162436380"></h4><h4 id='motivation-for-switch-ethernet'><span>Motivation for Switch Ethernet</span></h4><ul><li><span>Hubs do not increase capacity and eventually the LAN will saturate.</span></li><li><span>Switched Ethernet uses a high-speed backplane to connect hosts on a single line</span></li></ul><p><img src="img/image-20220524162617710.png" referrerpolicy="no-referrer" alt="image-20220524162617710"></p><p><img src="img/image-20220524162652253.png" referrerpolicy="no-referrer" alt="image-20220524162652253"></p><h4 id='switched-ethernet'><span>Switched Ethernet</span></h4><ul><li><p><span>Switches only output frames to ports for which they are destined</span></p></li><li><p><span>Each cable is usually full duplex, so the switch and host can talk at the same time</span></p></li><li><p><span>Each port is thus a single collision domain that only needs to run the CSMA/CD protocol if: </span></p><ul><li><span>it has multiple hosts connected via a hub</span></li><li><span>the cable is half-duplex.</span></li></ul></li><li><p><span>Switches improve performance as all hosts can send packets at the same time, </span><strong><span>without</span></strong><span> </span><strong><span>CSMA/CD</span></strong></p></li><li><p><span>Capacity is improved as frames are only deliverd to hosts that they are intended for</span></p></li><li><p><span>The impact of promiscuous mode is limited.</span></p></li><li><p><span>As two input ports may try to deliver frames to the same output port, the switch needs buffers, making it more expensive.</span></p></li></ul><h4 id='fast-ethernet'><span>Fast Ethernet</span></h4><ul><li><p><span>IEEE reconvened the 802.3 group in 1992 to create a faster 100mbps standard.</span></p></li><li><p><span>Two competing proposals</span></p><ul><li><span>Keep the protocol the same, but run it faster</span></li><li><span>Add lots of features</span></li></ul><p><span>-&gt; The first proposal won</span></p></li><li><p><span>Requires twisted pair wiring</span></p></li></ul><h4 id='1-gigabit-ethernet'><span>1-Gigabit Ethernet</span></h4><ul><li><p><span>Gigabit Ethernet was standardized in 1999:</span></p><ul><li><span>Goal 1: 10 fold increase in speed</span></li><li><span>Goal 2: backwards compatibility</span></li></ul></li><li><p><span>Gigabit Ethernet does not allow interconnection by hubs</span></p></li><li><p><span>In the case of connection to a switch on a duplex cable CSMA is not used, thus cable lengths are only limited by signal strength</span></p></li><li><p><span>Half duplex operation requires CSMA, limiting cable lengths to 25m - this proved problematic</span></p></li><li><p><span>Two hardware features were added:</span></p><ul><li><span>Carrier extension, which pads all packets to 512 bytes</span></li><li><span>Frame bursting, which concatenates small frames into a single &gt; 512 byte transmission.</span></li></ul></li></ul><h4 id='10-gigabit-ethernet'><span>10-Gigabit Ethernet</span></h4><ul><li><span>Follows the same approach as 1 gigabit Ethernet: increase speeds using the same approach.</span></li><li><span>To eliminate length restrictions, only full-duplex operation is allowed and hubs are not used.</span></li><li><span>Transmission over copper is difficult (4 pairs of UTP). Transmission over optical fibre is preferred.</span></li></ul><p>&nbsp;</p><h3 id='ieee-80211'><span>IEEE 802.11</span></h3><p><span>Two modes of operation:</span></p><ul><li><strong><span>Infrastructure</span></strong><span> </span><strong><span>mode</span></strong><span>: used by wired access points to provide access to wireless hosts.</span></li><li><strong><span>Ad-hoc mode</span></strong><span>: used to create a network on-the-fly between wireless hosts</span></li></ul><p><strong><span>802.11 Architecture</span></strong></p><p><img src="img/image-20220524172749036.png" referrerpolicy="no-referrer" alt="image-20220524172749036"></p><p>&nbsp;</p><h3 id='wireless-challenges'><span>Wireless Challenges</span></h3><p><span>RF Interference:</span></p><ul><li><span>Only small chunks of the spectrum may be used without a license and are therefore highly congested</span></li><li><span>Sporadic interference must be anticipated</span></li></ul><p><span>Blocked Paths:</span></p><ul><li><span>2.4GHz signals are blocked by metal, absorbed by water and scattered foliage.</span></li><li><span>Optical signals are blocked by any opaque object.</span></li></ul><p><span>Bandwidth Limitations:</span></p><ul><li><span>Low-power networking typically has an order of magnitude lower bandwidth than standard WiFi</span></li><li><span>Maximum packet sizes may be incompatible with other communication media</span></li></ul><p><span>Mobility:</span></p><ul><li><span>Nodes may move; necessitating protocols that can cope with a dynamic network topology.</span></li></ul><p><span>Power constraints:</span></p><ul><li><span>Yes, even on your laptop we must conserve power.</span></li></ul><h3 id='virtual-channel-sensing'><span>Virtual Channel Sensing</span></h3><p><span>In virtual channel sensing, we use higher level information to infer if we need to check the channel again. We do this by using </span><strong><span>Network Allocation Vectors (NAV)</span></strong><span>. Each frame carries a </span><strong><span>NAV</span></strong><span> </span><strong><span>field</span></strong><span> that say how long the transmission sequence will take to complete. </span></p><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="2.058ex" role="img" focusable="false" viewBox="0 -898.8 1000 909.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-53-TEX-N-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-53-TEX-N-2192"></use></g></g><g data-mml-node="mpadded" transform="translate(205.5,798.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mspace"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow{}</script><span>Now everyone will wait for this sequence to finish before trying to transmit</span></p><h4 id='power-saving'><span>Power Saving</span></h4><p><strong><span>First way</span></strong></p><ul><li><span>First approach is based on </span><strong><span>periodic broadcasts</span></strong><span> from the AP (beacon frames)</span></li><li><span>Used to advertise to the client that the AP has data ready for them</span></li><li><span>In-between beacon frames the client sleeps</span></li></ul><p>&nbsp;</p><p><strong><span>Second way</span></strong></p><ul><li><span>This approach uses client transmissions for timing</span></li><li><span>The AP buffers traffic for a client until the client transmits, then sends it immediately after the ACK</span></li><li><span>The client can sleep until it needs to transmit</span></li></ul><p><img src="img/image-20220525102306853.png" referrerpolicy="no-referrer" alt="image-20220525102306853"></p><h3 id='the-data-link-layer'><span>The Data Link Layer</span></h3><ul><li><span>Provides a well-defined software service interface to the physical media</span></li><li><span>Handles transmission error</span></li><li><span>Regulates the flow of data so that slow receivers are not swamped by fast senders</span></li><li><span>Contains the Medium Access Control sub-layer.</span></li></ul><h4 id='packets-and-frames'><span>Packets and Frames</span></h4><p><img src="img/image-20220525102618814.png" referrerpolicy="no-referrer" alt="image-20220525102618814"></p><h4 id='types-of-data-link-layer'><span>Types of Data Link Layer</span></h4><ul><li><p><strong><span>Unacknowledged connectionless service.</span></strong><span> </span></p><ul><li><span>E.g. Ethernet, appropriate for media with inherently low error rates or when collisions are detectable.</span></li></ul></li><li><p><strong><span>Acknowledged connectionless service.</span></strong><span> </span></p><ul><li><span>E.g. 802.11, appropriate for unreliable channels and when collisions are undetectable.</span></li></ul></li><li><p><strong><span>Acknowledged connection-oriented service.</span></strong><span> </span></p><ul><li><span>E.g., Telephone or serial line, provides a reliable bit stream.</span></li></ul></li></ul><p>&nbsp;</p><h3 id='framing'><span>Framing</span></h3><p><span>When the datalink layer receives data from the </span><strong><span>physical</span></strong><span> layer it may contains </span><strong><span>errors</span></strong><span>. Some bits may have different values and the number of bits received may be less than, equal to, or more than the number of bits transmitted. It is up to the data link layer to detect and, if necessary, </span><strong><span>correct</span></strong><span> errors. The data link layer usually does this by </span><strong><span>breaking the bit stream up into discrete frame</span></strong><span> and compute the checksum. But this is </span><strong><span>harder</span></strong><span> then it seems.</span></p><p><span>4 Methods:</span></p><ol start='' ><li><p><strong><span>Byte count</span></strong><span>: appends a field to the start of the frame giving its length but it doesn&#39;t help as we don&#39;t know where the next frame starts.</span></p></li><li><p><strong><span>Flag bytes with byte stuffing</span></strong><span>: Flag bytes are special values used to mark the start and end of each frame</span></p><ul><li><span>What if the flag byte occurs in the data? We just add an escape byte just before each &quot;accidental&quot; flag byte in the data.</span></li></ul></li><li><p><strong><span>Flag bits with bit stuffing</span></strong><span>: Same thing as before, just add a a special bit pattern. What if the escape bit occurs in the data?Imagine a flag byte of 01111110. Whenever the sender detects a sequence of five ones. It stuffs a zero in to make 011111010.</span></p></li><li><p><strong><span>Physical layer coding violations</span></strong></p></li></ol><p>&nbsp;</p><h2 id='select-physical-layer-topics'><span>Select Physical Layer Topics</span></h2><h3 id='twisted-pairs'><span>Twisted Pairs</span></h3><p><img src="img/image-20220525110159091.png" referrerpolicy="no-referrer" alt="image-20220525110159091"></p><p><span>Cables must be twisted, as a single cable is essentially an antenna: radiating power and absorbing interference.</span></p><h4 id='category-5-wiring-cat5'><span>Category 5 Wiring (Cat5)</span></h4><p><span>Category 5 wiring is an example of twisted pair. Each cable contains </span><strong><span>fours pairs of wires</span></strong><span> </span><strong><span>gently twisted together</span></strong><span>.</span></p><p><span>Full duplex links require a separate upstream and downstream wire, half duplex links do not</span></p><p><span>Offers limited bandwidth. Cat 6 and 7 add extra shielding and performance.</span></p><h3 id='coaxial-cable'><span>Coaxial cable</span></h3><p><img src="img/image-20220525110541635.png" referrerpolicy="no-referrer" alt="image-20220525110541635"></p><p><span>Better shielding but lower bandwidth</span></p><h3 id='optical-fiber'><span>Optical Fiber</span></h3><p><span>Three Part System: light source, transmission medium and detector.</span></p><p><span>Because of a media as thin as a few light wave-lengths act as a wave-guide allowing light to move in only one direction.</span></p><p><span>Can transmit at 100mbps over  100km without amplification.</span></p><p>&nbsp;</p><h3 id='wireless-communication'><span>Wireless Communication</span></h3><p><img src="img/image-20220525111020798.png" referrerpolicy="no-referrer" alt="image-20220525111020798"></p><p>&nbsp;</p><h4 id='microwave-communication'><span>Microwave communication</span></h4><p><span>Not very important</span></p><p><span>Compared to lower frequency EM radiation, they are high bandwidth, but do not travel through solid objects well. Using an omni. antenna microwaves can evenly cover an area, or coverage can made asymmetric using a directional antenna.</span></p><p><span>Microwaves are absorbed by water molecules. So practically anything standing in between ruins it. All microwave transmitters are to some extent also serving as a microwave oven for all water containing objects in-between.</span></p></div></div>
</body>
</html>